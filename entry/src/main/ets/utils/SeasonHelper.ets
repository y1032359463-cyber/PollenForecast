/**
 * èŠ±ç²‰å­£èŠ‚åˆ¤æ–­å·¥å…·
 * ç”¨äºŽåˆ¤æ–­å½“å‰æ˜¯å¦ä¸ºèŠ±ç²‰å­£ï¼Œä»¥åŠèŽ·å–å­£èŠ‚æ€§å†…å®¹
 */

/**
 * å­£èŠ‚ç±»åž‹
 */
export enum SeasonType {
  SPRING_POLLEN = 'spring_pollen',    // æ˜¥å­£èŠ±ç²‰å­£ (3-5æœˆ)
  SUMMER = 'summer',                   // å¤å­£ (6-7æœˆ)
  AUTUMN_POLLEN = 'autumn_pollen',    // ç§‹å­£èŠ±ç²‰å­£ (8-10æœˆ)
  WINTER = 'winter'                    // å†¬å­£ (11-2æœˆ)
}

/**
 * éžèŠ±ç²‰å­£æç¤ºå†…å®¹
 */
export interface OffSeasonContent {
  title: string           // æ ‡é¢˜
  description: string     // æè¿°
  tips: string[]          // æç¤ºåˆ—è¡¨
  nextSeasonHint: string  // ä¸‹ä¸€èŠ±ç²‰å­£æç¤º
}

/**
 * èŠ±ç²‰å­£èŠ‚å·¥å…·ç±»
 */
export class SeasonHelper {
  
  /**
   * èŽ·å–å½“å‰å­£èŠ‚ç±»åž‹
   */
  static getCurrentSeason(): SeasonType {
    const month = new Date().getMonth() + 1  // 1-12
    
    if (month >= 3 && month <= 5) {
      return SeasonType.SPRING_POLLEN
    } else if (month >= 6 && month <= 7) {
      return SeasonType.SUMMER
    } else if (month >= 8 && month <= 10) {
      return SeasonType.AUTUMN_POLLEN
    } else {
      return SeasonType.WINTER
    }
  }
  
  /**
   * åˆ¤æ–­å½“å‰æ˜¯å¦ä¸ºèŠ±ç²‰å­£
   */
  static isPollenSeason(): boolean {
    const season = SeasonHelper.getCurrentSeason()
    return season === SeasonType.SPRING_POLLEN || season === SeasonType.AUTUMN_POLLEN
  }
  
  /**
   * èŽ·å–å½“å‰æœˆä»½
   */
  static getCurrentMonth(): number {
    return new Date().getMonth() + 1
  }
  
  /**
   * èŽ·å–éžèŠ±ç²‰å­£æ˜¾ç¤ºå†…å®¹
   */
  static getOffSeasonContent(): OffSeasonContent {
    const season = SeasonHelper.getCurrentSeason()
    const month = SeasonHelper.getCurrentMonth()
    
    if (season === SeasonType.WINTER) {
      return {
        title: 'å†¬å­£èŠ±ç²‰ä¼‘çœ æœŸ',
        description: 'å½“å‰ä¸ºå†¬å­£ï¼Œå¤§éƒ¨åˆ†åœ°åŒºèŠ±ç²‰æµ“åº¦æžä½Žï¼Œæ˜¯è¿‡æ•æ‚£è€…çš„èˆ’é€‚æœŸã€‚',
        tips: [
          'ðŸŒ¿ å¯é€‚å½“è¿›è¡Œæˆ·å¤–æ´»åŠ¨ï¼Œå‘¼å¸æ–°é²œç©ºæ°”',
          'ðŸ  è¶æ­¤æ—¶æœŸè¿›è¡Œå®¶åº­å¤§æ‰«é™¤ï¼Œæ¸…é™¤ç§¯å°˜',
          'ðŸ’ª åŠ å¼ºé”»ç‚¼ï¼Œå¢žå¼ºä½“è´¨ï¼Œä¸ºèŠ±ç²‰å­£åšå‡†å¤‡',
          'ðŸ“… æå‰å…³æ³¨æ˜Žå¹´èŠ±ç²‰å­£é¢„æŠ¥'
        ],
        nextSeasonHint: 'ä¸‹ä¸€ä¸ªèŠ±ç²‰å­£é¢„è®¡åœ¨3æœˆå¼€å§‹ï¼ˆæ˜¥å­£èŠ±ç²‰å­£ï¼‰'
      }
    } else if (season === SeasonType.SUMMER) {
      return {
        title: 'å¤å­£è¿‡æ¸¡æœŸ',
        description: 'å¤å­£èŠ±ç²‰æµ“åº¦ç›¸å¯¹è¾ƒä½Žï¼Œä½†éƒ¨åˆ†åœ°åŒºä»æœ‰è‰æœ¬æ¤ç‰©èŠ±ç²‰ã€‚',
        tips: [
          'ðŸŒ¾ æ³¨æ„è‰åœ°èŠ±ç²‰ï¼Œé¿å…åœ¨è‰åªä¹…ç•™',
          'â˜€ï¸ é«˜æ¸©å¤©æ°”æ³¨æ„é˜²æš‘ï¼Œå‡å°‘æ­£åˆå¤–å‡º',
          'ðŸ’¨ é›·é›¨å¤©æ°”åŽèŠ±ç²‰æµ“åº¦å¯èƒ½å‡é«˜',
          'ðŸ”” 8æœˆç§‹å­£èŠ±ç²‰å­£å³å°†æ¥ä¸´ï¼Œæå‰å‡†å¤‡'
        ],
        nextSeasonHint: 'ç§‹å­£èŠ±ç²‰å­£é¢„è®¡åœ¨8æœˆå¼€å§‹ï¼ˆè’¿è‰ã€è±šè‰é«˜å‘ï¼‰'
      }
    }
    
    // é»˜è®¤è¿”å›žï¼ˆèŠ±ç²‰å­£æ—¶ä¸åº”è°ƒç”¨æ­¤æ–¹æ³•ï¼‰
    return {
      title: 'èŠ±ç²‰ç›‘æµ‹ä¸­',
      description: 'æ­£åœ¨èŽ·å–èŠ±ç²‰æ•°æ®...',
      tips: ['è¯·ç¨å€™...'],
      nextSeasonHint: ''
    }
  }
  
  /**
   * èŽ·å–èŠ±ç²‰å­£é˜²æŠ¤è¦ç‚¹
   */
  static getPollenSeasonTips(): string[] {
    const season = SeasonHelper.getCurrentSeason()
    
    if (season === SeasonType.SPRING_POLLEN) {
      return [
        'ðŸŒ³ æ˜¥å­£ä¸»è¦èŠ±ç²‰ï¼šæŸæ ‘ã€æ¨æ ‘ã€æŸ³æ ‘ã€æ¦†æ ‘',
        'ðŸ˜· å¤–å‡ºä½©æˆ´é˜²æŠ¤å£ç½©å’ŒæŠ¤ç›®é•œ',
        'ðŸš¿ å›žå®¶åŽåŠæ—¶æ´—è„¸ã€æ´—æ‰‹ã€æ¸…æ´—é¼»è…”',
        'ðŸªŸ èŠ±ç²‰é«˜å³°æœŸï¼ˆä¸Šåˆ10ç‚¹-ä¸‹åˆ4ç‚¹ï¼‰å…³é—­é—¨çª—',
        'ðŸ‘• å¤–å‡ºè¡£ç‰©å›žå®¶åŽåŠæ—¶æ›´æ¢',
        'ðŸŒ¬ï¸ ä½¿ç”¨ç©ºæ°”å‡€åŒ–å™¨å‡€åŒ–å®¤å†…ç©ºæ°”'
      ]
    } else if (season === SeasonType.AUTUMN_POLLEN) {
      return [
        'ðŸŒ¿ ç§‹å­£ä¸»è¦èŠ±ç²‰ï¼šè’¿è‰ã€è±šè‰ã€è‘Žè‰',
        'ðŸ˜· ç§‹å­£èŠ±ç²‰è‡´æ•æ€§æ›´å¼ºï¼ŒåŠ¡å¿…åšå¥½é˜²æŠ¤',
        'ðŸš— å¼€è½¦æ—¶å…³é—­è½¦çª—ï¼Œä½¿ç”¨å†…å¾ªçŽ¯',
        'ðŸ§º é¿å…åœ¨å®¤å¤–æ™¾æ™’è¡£ç‰©å’ŒåºŠå“',
        'ðŸ¥ ç—‡çŠ¶ä¸¥é‡æ—¶åŠæ—¶å°±åŒ»',
        'ðŸ’Š éµåŒ»å˜±æå‰ä½¿ç”¨é¢„é˜²æ€§è¯ç‰©'
      ]
    }
    
    return []
  }
  
  /**
   * èŽ·å–å­£èŠ‚æè¿°æ–‡å­—
   */
  static getSeasonDescription(): string {
    const season = SeasonHelper.getCurrentSeason()
    
    switch (season) {
      case SeasonType.SPRING_POLLEN:
        return 'æ˜¥å­£èŠ±ç²‰å­£ï¼ˆ3-5æœˆï¼‰'
      case SeasonType.SUMMER:
        return 'å¤å­£è¿‡æ¸¡æœŸï¼ˆ6-7æœˆï¼‰'
      case SeasonType.AUTUMN_POLLEN:
        return 'ç§‹å­£èŠ±ç²‰å­£ï¼ˆ8-10æœˆï¼‰'
      case SeasonType.WINTER:
        return 'å†¬å­£ä¼‘çœ æœŸï¼ˆ11-2æœˆï¼‰'
      default:
        return ''
    }
  }
}

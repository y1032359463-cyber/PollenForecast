/**
 * èŠ±ç²‰æ•°æ®æ¨¡å‹
 * å®šä¹‰èŠ±ç²‰æµ“åº¦ç›¸å…³çš„æ•°æ®ç»“æ„
 */

/**
 * èŠ±ç²‰æµ“åº¦ç­‰çº§æšä¸¾
 */
export enum PollenLevel {
  VERY_LOW = 1,   // å¾ˆä½ - å¯æ­£å¸¸æ´»åŠ¨
  LOW = 2,        // ä½ - è½»åº¦è¿‡æ•è€…æ³¨æ„
  MODERATE = 3,   // ä¸­ç­‰ - å»ºè®®ä½©æˆ´å£ç½©
  HIGH = 4,       // é«˜ - å‡å°‘æˆ·å¤–æ´»åŠ¨
  VERY_HIGH = 5   // å¾ˆé«˜ - é¿å…å¤–å‡º
}

/**
 * èŠ±ç²‰ç±»å‹æšä¸¾
 */
export enum PollenType {
  TREE = 'tree',       // æ ‘æœ¨èŠ±ç²‰
  GRASS = 'grass',     // è‰ç±»èŠ±ç²‰
  WEED = 'weed'        // æ‚è‰èŠ±ç²‰
}

/**
 * èŠ±ç²‰æ•°æ®æ¥å£
 */
export interface PollenData {
  level: PollenLevel;           // æµ“åº¦ç­‰çº§ 1-5
  value: number;                // æµ“åº¦æ•°å€¼
  pollenTypes: PollenTypeData[]; // å„ç±»èŠ±ç²‰è¯¦æƒ…
  updateTime: string;           // æ›´æ–°æ—¶é—´
  location: LocationInfo;       // ä½ç½®ä¿¡æ¯
}

/**
 * èŠ±ç²‰ç±»å‹è¯¦ç»†æ•°æ®
 */
export interface PollenTypeData {
  type: PollenType;             // èŠ±ç²‰ç±»å‹
  name: string;                 // ä¸­æ–‡åç§°
  level: PollenLevel;           // æµ“åº¦ç­‰çº§
  value: number;                // æµ“åº¦æ•°å€¼
  species?: string[];           // ä¸»è¦æ¤ç‰©ç§ç±»
}

/**
 * ä½ç½®ä¿¡æ¯
 */
export interface LocationInfo {
  city: string;                 // åŸå¸‚å
  district?: string;            // åŒº/å¿
  latitude: number;             // çº¬åº¦
  longitude: number;            // ç»åº¦
}

/**
 * èŠ±ç²‰é¢„æŠ¥æ•°æ®ï¼ˆå•æ—¥ï¼‰
 */
export interface PollenForecast {
  date: string;                 // æ—¥æœŸ YYYY-MM-DD
  dayOfWeek: string;            // æ˜ŸæœŸå‡ 
  level: PollenLevel;           // é¢„æµ‹ç­‰çº§
  value: number;                // é¢„æµ‹æ•°å€¼
  highTemp?: number;            // æœ€é«˜æ¸©åº¦
  lowTemp?: number;             // æœ€ä½æ¸©åº¦
  weather?: string;             // å¤©æ°”çŠ¶å†µ
}

/**
 * é˜²æŠ¤å»ºè®®
 */
export interface ProtectionAdvice {
  level: PollenLevel;           // å¯¹åº”ç­‰çº§
  title: string;                // å»ºè®®æ ‡é¢˜
  description: string;          // è¯¦ç»†æè¿°
  actions: string[];            // å…·ä½“è¡ŒåŠ¨å»ºè®®
}

/**
 * è·å–ç­‰çº§å¯¹åº”çš„é¢œè‰²
 */
export function getLevelColor(level: PollenLevel): string {
  switch (level) {
    case PollenLevel.VERY_LOW:
      return '#4CAF50';  // ç»¿è‰²
    case PollenLevel.LOW:
      return '#8BC34A';  // æµ…ç»¿
    case PollenLevel.MODERATE:
      return '#FFC107';  // é»„è‰²
    case PollenLevel.HIGH:
      return '#FF9800';  // æ©™è‰²
    case PollenLevel.VERY_HIGH:
      return '#F44336';  // çº¢è‰²
    default:
      return '#9E9E9E';  // ç°è‰²
  }
}

/**
 * è·å–ç­‰çº§å¯¹åº”çš„èƒŒæ™¯è‰²
 */
export function getLevelBgColor(level: PollenLevel): string {
  switch (level) {
    case PollenLevel.VERY_LOW:
      return '#E8F5E9';  // æµ…ç»¿èƒŒæ™¯
    case PollenLevel.LOW:
      return '#F1F8E9';  // æ›´æµ…çš„ç»¿
    case PollenLevel.MODERATE:
      return '#FFF8E1';  // æµ…é»„èƒŒæ™¯
    case PollenLevel.HIGH:
      return '#FFF3E0';  // æµ…æ©™èƒŒæ™¯
    case PollenLevel.VERY_HIGH:
      return '#FFEBEE';  // æµ…çº¢èƒŒæ™¯
    default:
      return '#FAFAFA';  // æµ…ç°èƒŒæ™¯
  }
}

/**
 * è·å–ç­‰çº§æè¿°æ–‡æœ¬
 */
export function getLevelText(level: PollenLevel): string {
  switch (level) {
    case PollenLevel.VERY_LOW:
      return 'å¾ˆä½';
    case PollenLevel.LOW:
      return 'è¾ƒä½';
    case PollenLevel.MODERATE:
      return 'ä¸­ç­‰';
    case PollenLevel.HIGH:
      return 'è¾ƒé«˜';
    case PollenLevel.VERY_HIGH:
      return 'å¾ˆé«˜';
    default:
      return 'æœªçŸ¥';
  }
}

/**
 * è·å–ç­‰çº§å¯¹åº”çš„è¡¨æƒ…å›¾æ ‡
 */
export function getLevelEmoji(level: PollenLevel): string {
  switch (level) {
    case PollenLevel.VERY_LOW:
      return 'ğŸ˜Š';
    case PollenLevel.LOW:
      return 'ğŸ™‚';
    case PollenLevel.MODERATE:
      return 'ğŸ˜';
    case PollenLevel.HIGH:
      return 'ğŸ˜·';
    case PollenLevel.VERY_HIGH:
      return 'ğŸ ';
    default:
      return 'â“';
  }
}

# 配置系统验证操作步骤

## 前提条件检查

- ✅ DevEco Studio 5.0 已安装
- ✅ HarmonyOS 5.0 SDK 已配置
- ✅ 代码已同步到本地 (c:\HarmonyOS_App_Plans\Healthy_life)

## 步骤1: 打开项目

### 1.1 启动DevEco Studio
1. 双击桌面图标或开始菜单中的 "DevEco Studio"
2. 等待IDE启动完成

### 1.2 导入项目
1. 点击 "Open" 按钮
2. 浏览到: `c:\HarmonyOS_App_Plans\Healthy_life`
3. 点击 "OK" 确认打开
4. 等待项目索引完成 (右下角进度条消失)

**预计时间**: 2-3分钟

---

## 步骤2: 验证默认配置 (健康管理主题)

### 2.1 检查当前配置文件
1. 在项目结构中找到:
   ```
   entry/src/main/resources/rawfile/config.json
   ```
2. 双击打开,确认看到:
   ```json
   {
     "app": {
       "appName": "健康管理",
       ...
     },
     "theme": {
       "primaryColor": "#52C41A",  // 绿色
       ...
     },
     "taskTypes": [
       {"id": 1, "name": "早起", ...},
       {"id": 2, "name": "喝水", ...}
       ...
     ]
   }
   ```

### 2.2 编译并运行
1. 点击顶部工具栏的设备选择器
2. 选择模拟器或真机设备
   - **推荐**: 使用DevEco Studio内置的模拟器
   - 如果没有模拟器,点击 "Device Manager" 创建一个
3. 点击绿色的 "Run" 按钮 (▶️) 或按 `Shift + F10`
4. 等待编译完成并安装到设备

**预计时间**: 首次编译5-10分钟,后续编译1-2分钟

### 2.3 验证运行效果
应用启动后,您应该看到:

✅ **预期效果**:
- 应用名称: "健康管理"
- 主题色: 绿色调
- 任务卡片显示:
  - 早起
  - 喝水 (单位: 杯)
  - 吃苹果 (单位: 个)
  - 每日微笑
  - 每日刷牙
  - 早睡

📸 **截图保存**: 可以截图保存,方便后面对比

---

## 步骤3: 切换到学习打卡主题

### 3.1 修改配置加载器
1. 在项目中找到:
   ```
   entry/src/main/ets/common/config/ConfigLoader.ets
   ```
2. 双击打开文件
3. 找到第17行:
   ```typescript
   private static CONFIG_FILE_NAME = 'config.json';
   ```
4. 修改为:
   ```typescript
   private static CONFIG_FILE_NAME = 'config_study.json';
   ```
5. 保存文件 (`Ctrl + S`)

### 3.2 重新编译运行
1. 点击顶部的 "Run" 按钮 (▶️)
2. DevEco Studio会自动:
   - 卸载旧版本应用
   - 编译新版本
   - 安装并启动

**预计时间**: 1-2分钟 (增量编译较快)

### 3.3 验证新效果
应用重新启动后,您应该看到:

✅ **预期效果**:
- 应用名称: "学习打卡"
- 主题色: 蓝色调
- 任务卡片显示:
  - 早读 (单位: 分钟)
  - 做题 (单位: 道)
  - 背单词 (单位: 个)
  - 专注学习 (单位: 分钟)
  - 复习笔记 (单位: 页)
  - 晚自习 (单位: 小时)

📸 **截图保存**: 截图保存用于对比

---

## 步骤4: 对比验证

### 4.1 关键对比点

| 项目 | 健康管理 (config.json) | 学习打卡 (config_study.json) |
|------|----------------------|----------------------------|
| 应用名 | ✅ 健康管理 | ✅ 学习打卡 |
| 主题色 | ✅ 绿色 #52C41A | ✅ 蓝色 #1890FF |
| 任务1 | ✅ 早起 | ✅ 早读 (30分钟) |
| 任务2 | ✅ 喝水 (杯) | ✅ 做题 (道) |
| 任务3 | ✅ 吃苹果 (个) | ✅ 背单词 (个) |

### 4.2 验证结论

如果以上对比点全部正确,说明:
- ✅ 配置系统工作正常
- ✅ 同一套代码生成了两个不同的应用
- ✅ 应用工厂模式验证成功!

---

## 常见问题排查

### Q1: 编译报错 "Cannot find module..."
**原因**: 依赖未安装
**解决**:
1. 打开终端 (DevEco Studio底部的Terminal标签)
2. 运行: `ohpm install`
3. 等待依赖安装完成
4. 重新编译

### Q2: 应用安装失败
**原因**: 设备连接问题或权限问题
**解决**:
1. 检查设备是否正确连接 (模拟器是否启动)
2. 卸载旧版本应用后重试
3. 查看DevEco Studio底部的日志信息

### Q3: 应用崩溃或闪退
**原因**: 配置文件格式错误
**解决**:
1. 检查 config.json 或 config_study.json 是否是有效JSON
2. 查看DevEco Studio的 "Hilog" 标签查看错误日志
3. 确认所有必需字段都存在

### Q4: 任务显示仍然是旧的
**原因**: 配置文件切换后未重新编译
**解决**:
1. 点击 "Build" → "Clean Project"
2. 再点击 "Build" → "Rebuild Project"
3. 重新运行应用

### Q5: 没有看到主题色变化
**原因**: 颜色配置暂未完全应用到所有组件
**解决**:
- 目前主要验证任务名称和单位的变化
- 主题色完整应用需要在Phase 2实现ThemeManager

---

## 验证成功后的下一步

### 立即可做:
1. **修改config_study.json**
   - 尝试改变任务名称
   - 修改目标值和单位
   - 观察应用中的变化

2. **创建第三个配置**
   - 复制config.json → config_fitness.json
   - 主题改为橙色 #FF9800
   - 任务改为健身类 (跑步、深蹲、仰卧起坐等)

### 下一阶段开发:
1. **改造更多组件** (Phase 2)
   - HomeComponent - 首页布局
   - MainPage - 主页面标题
   - TaskDetailDialog - 任务详情

2. **实现ThemeManager** (Phase 2)
   - 动态应用主题色到所有UI
   - 支持深色模式
   - 主题预览功能

3. **批量生产应用** (Phase 3)
   - 创建8个配置文件
   - 准备对应的图标资源
   - 批量编译打包

---

## 时间安排建议

**今天 (11月4日)**:
- ✅ 配置系统已完成
- 🎯 验证运行效果 (1小时)
- 📝 记录问题和改进点

**明天 (11月5日)**:
- 改造HomeComponent和MainPage
- 实现ThemeManager基础功能

**本周末 (11月9-10日)**:
- 完成剩余组件改造
- 创建8个完整配置文件
- 准备图标资源

**下周 (11月11-15日)**:
- 批量编译测试
- 提交AppGallery审核

---

## 需要帮助?

如果遇到问题:
1. 查看本文档的 "常见问题排查" 部分
2. 查看 DevEco Studio 的 Hilog 日志
3. 查看 `配置系统使用说明.md` 了解更多细节
4. 随时问我具体问题!

---

## 验证清单

完成每个步骤后打勾:

- [ ] DevEco Studio已安装并启动
- [ ] Healthy_life项目已打开
- [ ] 使用config.json成功运行 (健康管理)
- [ ] 截图保存了健康管理界面
- [ ] 修改ConfigLoader使用config_study.json
- [ ] 使用config_study.json成功运行 (学习打卡)
- [ ] 截图保存了学习打卡界面
- [ ] 对比确认两个版本的差异
- [ ] 配置系统验证成功! 🎉

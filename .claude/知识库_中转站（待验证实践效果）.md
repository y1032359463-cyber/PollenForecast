 çŸ¥è¯†åº“ä¸­è½¬ç«™ï¼ˆå¾…éªŒè¯æ–¹æ¡ˆï¼‰

> **æœ€åæ›´æ–°**: 2026-01-16
> **ç”¨é€”**: å­˜æ”¾å¾…éªŒè¯çš„ä¸“å®¶æ–¹æ¡ˆï¼ŒéªŒè¯é€šè¿‡åç§»è‡³çŸ¥è¯†åº“åˆ†ç±»æ–‡ä»¶
> **ç»´æŠ¤è§„åˆ™**: éªŒè¯é€šè¿‡åç«‹å³è¿ç§»ï¼Œä¿æŒæ–‡ä»¶ç²¾ç®€

---

## ğŸ“ HarmonyOS API 20 EXIFç¼–è¾‘åŠŸèƒ½å®ç°æ–¹æ¡ˆï¼ˆå››ä¸“å®¶å›å¤ 2026-01-16ï¼‰

> **æ¥æº**: åä¸ºæ™ºèƒ½å®¢æœ + å°ç±³MIMO + å°è‰º + è±†åŒ…  
> **çŠ¶æ€**: â³ **å¾…çœŸæœºéªŒè¯**  
> **é¡¹ç›®**: EXIFPhotoParamTool  
> **é—®é¢˜**: å¦‚ä½•åœ¨HarmonyOS API 20ä¸­ç¼–è¾‘ç…§ç‰‡çš„GPSä½ç½®å’Œæ‹æ‘„æ—¶é—´

### ä¸€ã€å››ä¸“å®¶è§‚ç‚¹å¯¹æ¯”

| é—®é¢˜ | åä¸ºæ™ºèƒ½å®¢æœ | å°ç±³MIMO | å°è‰º | è±†åŒ… | å…±è¯†åº¦ |
|------|-------------|---------|------|------|--------|
| **modifyImageProperty()æ”¯æŒå†™å…¥?** | âœ… æ”¯æŒ | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ | âš ï¸ æœ‰é™æ”¯æŒ | 75% |
| **åª’ä½“åº“URIæœ‰å†™æƒé™?** | âŒ æ—  | âŒ æ—  | âŒ æ—  | âŒ æ—  | **100%** |
| **è§£å†³æ–¹æ¡ˆ** | å¤åˆ¶åˆ°æ²™ç®± | åˆ›å»ºæ–°ç…§ç‰‡ | å¤åˆ¶åˆ°æ²™ç®± | å¤åˆ¶åˆ°æ²™ç®± | **100%** |
| **Native C++æ–¹æ¡ˆ** | å¯é€‰ | æ¨è | æš‚æœªå¼€æ”¾ | å¯é€‰ | 50% |

### äºŒã€æ ¸å¿ƒå…±è¯†ï¼ˆ100%ä¸€è‡´ï¼‰

1. **åª’ä½“åº“URIæ— å†™æƒé™**ï¼šPhotoPickerè¿”å›çš„`file://media/...`åªæœ‰åªè¯»æƒé™
2. **è§£å†³æ–¹æ¡ˆ**ï¼šå¿…é¡»å…ˆå¤åˆ¶åˆ°åº”ç”¨æ²™ç®±ç›®å½•ï¼ˆ`context.filesDir`æˆ–`context.cacheDir`ï¼‰
3. **æ ¼å¼è¦æ±‚ä¸¥æ ¼**ï¼š
   - GPSï¼š`åº¦,åˆ†,ç§’` æ ¼å¼ï¼ˆå¦‚ `39,54,15.6`ï¼‰
   - æ—¶é—´ï¼š`YYYY:MM:DD HH:MM:SS` æ ¼å¼ï¼ˆå¦‚ `2024:12:25 10:30:00`ï¼‰

### ä¸‰ã€æ¨èå®ç°æµç¨‹ï¼ˆå››ä¸“å®¶å…±è¯†ï¼‰

```mermaid
graph TD
    A[ç”¨æˆ·é€šè¿‡PhotoPickeré€‰æ‹©ç…§ç‰‡] --> B[è·å–åªè¯»URI]
    B --> C[å¤åˆ¶åˆ°åº”ç”¨æ²™ç®±ç›®å½•]
    C --> D[ä¿®æ”¹æ²™ç®±æ–‡ä»¶çš„EXIF]
    D --> E[ä¿å­˜ä¸ºæ–°ç…§ç‰‡åˆ°ç›¸å†Œ]
```

### å››ã€æ ¸å¿ƒä»£ç ç¤ºä¾‹ï¼ˆè±†åŒ…æä¾›ï¼Œæœ€å®Œæ•´ï¼‰

```typescript
import { image } from '@kit.ImageKit';
import fs from '@ohos.file.fs';
import photoAccessHelper from '@ohos.photoAccessHelper';

// æ­¥éª¤1ï¼šå¤åˆ¶åª’ä½“åº“æ–‡ä»¶åˆ°åº”ç”¨æ²™ç®±
async function copyPhotoToPrivateDir(context: Context, sourceUri: string): Promise<string> {
  const sourceFile = await fs.open(sourceUri, fs.OpenMode.READ_ONLY);
  const fileName = `photo_${Date.now()}.jpg`;
  const targetPath = `${context.filesDir}/${fileName}`;
  const targetFile = await fs.open(targetPath, fs.OpenMode.WRITE_ONLY | fs.OpenMode.CREATE);
  await fs.copyFile(sourceFile.fd, targetFile.fd);
  await fs.close(sourceFile.fd);
  await fs.close(targetFile.fd);
  return targetPath;
}

// æ­¥éª¤2ï¼šä¿®æ”¹EXIFï¼ˆæ ¼å¼è¦æ±‚ä¸¥æ ¼ï¼ï¼‰
async function editExifData(filePath: string, gpsLat: string, gpsLng: string, shootTime: string) {
  const imageSource = image.createImageSource(filePath);
  
  // GPSæ ¼å¼éªŒè¯
  const gpsFormatReg = /^\d+,\d+,\d+(\.\d+)?$/;
  if (!gpsFormatReg.test(gpsLat) || !gpsFormatReg.test(gpsLng)) {
    throw new Error('GPSæ ¼å¼é”™è¯¯ï¼Œéœ€ç¬¦åˆã€Œåº¦,åˆ†,ç§’ã€æ ¼å¼ï¼ˆå¦‚39,54,15.6ï¼‰');
  }
  
  // æ—¶é—´æ ¼å¼éªŒè¯
  const timeFormatReg = /^\d{4}:\d{2}:\d{2} \d{2}:\d{2}:\d{2}$/;
  if (!timeFormatReg.test(shootTime)) {
    throw new Error('æ‹æ‘„æ—¶é—´æ ¼å¼é”™è¯¯ï¼Œéœ€ç¬¦åˆã€ŒYYYY:MM:DD HH:MM:SSã€æ ¼å¼');
  }
  
  // ä¿®æ”¹EXIFå­—æ®µ
  await imageSource.modifyImageProperty(image.PropertyKey.GPS_LATITUDE, gpsLat);
  await imageSource.modifyImageProperty(image.PropertyKey.GPS_LONGITUDE, gpsLng);
  await imageSource.modifyImageProperty(image.PropertyKey.DATE_TIME_ORIGINAL, shootTime);
}

// æ­¥éª¤3ï¼šä¿å­˜åˆ°ç³»ç»Ÿç›¸å†Œ
async function uploadToPhotoLibrary(context: Context, modifiedFilePath: string): Promise<void> {
  const helper = photoAccessHelper.getPhotoAccessHelper(context);
  const newPhotoUri = await helper.createAsset(
    photoAccessHelper.PhotoType.IMAGE, 
    'jpg', 
    { title: `edited_${Date.now()}.jpg` }
  );
  
  const sourceFile = await fs.open(modifiedFilePath, fs.OpenMode.READ_ONLY);
  const targetFile = await fs.open(newPhotoUri, fs.OpenMode.WRITE_ONLY | fs.OpenMode.CREATE);
  await fs.copyFile(sourceFile.fd, targetFile.fd);
  await fs.close(sourceFile.fd);
  await fs.close(targetFile.fd);
}
```

### äº”ã€æƒé™é…ç½®ï¼ˆå¿…é¡»ï¼‰

```json
// module.json5
"requestPermissions": [
  { "name": "ohos.permission.READ_IMAGEVIDEO" },
  { "name": "ohos.permission.WRITE_IMAGEVIDEO" }
]
```

### å…­ã€å…³é”®é£é™©ç‚¹

1. **modifyImagePropertyå¯èƒ½ä¸ç”Ÿæ•ˆ**ï¼ˆå°ç±³MIMOè­¦å‘Šï¼‰ï¼š
   - éœ€è¦çœŸæœºéªŒè¯
   - å¦‚æœä¸ç”Ÿæ•ˆï¼Œé™çº§ä¸º"åªæ”¹APPå†…è®°å½•"

2. **æ ¼å¼é”™è¯¯é™é»˜å¤±è´¥**ï¼ˆè±†åŒ…è­¦å‘Šï¼‰ï¼š
   - æ ¼å¼ä¸ç¬¦åˆè¦æ±‚æ—¶ï¼Œä¸æŠ¥é”™ä½†ä¿®æ”¹ä¸ç”Ÿæ•ˆ
   - å¿…é¡»å…ˆåšæ ¼å¼éªŒè¯

3. **ç”»è´¨æŸå¤±**ï¼š
   - è‹¥éœ€é‡æ–°ç¼–ç ï¼Œä½¿ç”¨ `quality: 100` æœ€é«˜è´¨é‡
   - æ¨èæ–¹æ¡ˆæ˜¯ç›´æ¥ä¿®æ”¹æ–‡ä»¶ï¼ˆä¸é‡æ–°ç¼–ç ï¼‰

### ä¸ƒã€éªŒè¯æ¸…å•

- [ ] å¤åˆ¶åˆ°æ²™ç®±ç›®å½•æ˜¯å¦æˆåŠŸ
- [ ] modifyImageProperty()æ˜¯å¦çœŸæ­£å†™å…¥EXIF
- [ ] é€šè¿‡getImageProperty()éªŒè¯ä¿®æ”¹æ˜¯å¦ç”Ÿæ•ˆ
- [ ] ä¿å­˜åˆ°ç›¸å†ŒåEXIFæ˜¯å¦ä¿ç•™
- [ ] æ ¼å¼é”™è¯¯æ—¶çš„è¡Œä¸ºï¼ˆé™é»˜å¤±è´¥è¿˜æ˜¯æŠ¥é”™ï¼‰

### å…«ã€å®æ–½ä¼˜å…ˆçº§

| é˜¶æ®µ | ä»»åŠ¡ | è¯´æ˜ |
|------|------|------|
| **P0** | æ–¹æ¡ˆAï¼šåªæ”¹APPå†…è®°å½• | 100%å¯è¡Œï¼Œä½œä¸ºä¿åº• |
| **P1** | æ–¹æ¡ˆBï¼šåˆ›å»ºæ–°ç…§ç‰‡ | éœ€éªŒè¯modifyImageProperty |
| **P2** | Native C++æ–¹æ¡ˆ | å¦‚æœæ–¹æ¡ˆBå¤±è´¥ |

---

## âœ… æœ€è¿‘è½¬ç§»è®°å½•ï¼ˆ2026-01-14ï¼‰

- âœ… **åŸå¸‚åæ ¼å¼åŒ¹é…é—®é¢˜** â†’ å·²è½¬ç§»è‡³ `çŸ¥è¯†åº“/ArkTSè¯­æ³•.md`
  - getCityWithDistricts åŒ¹é…é€»è¾‘ä¼˜åŒ–
  - å››ä¸“å®¶å…±è¯†ï¼ˆå°ç±³MIMO + CodeGenie + è±†åŒ… + å°è‰ºï¼‰
  - ç©ºæ ¼/å…¨è§’å­—ç¬¦å¤„ç†
- âœ… **Listç»„ä»¶ç‚¹å‡»äº‹ä»¶ç»‘å®šè§„èŒƒ** â†’ å·²è½¬ç§»è‡³ `çŸ¥è¯†åº“/ArkTSè¯­æ³•.md`
  - ä¸‰ä¸“å®¶å…±è¯†ï¼ˆå°è‰º AI + CodeGenie + å°ç±³MIMOï¼‰
  - ListItemç»„ä»¶äº‹ä»¶æ‹¦æˆªæœºåˆ¶
  - Set vs æ•°ç»„çŠ¶æ€ç®¡ç†å¯¹æ¯”
- âœ… **getCityWithDistricts UTF-8ç¼–ç é—®é¢˜** â†’ å·²è½¬ç§»è‡³ `çŸ¥è¯†åº“/ArkTSè¯­æ³•.md`
  - ä½¿ç”¨ util.TextDecoder è§£å†³ä¸­æ–‡ä¹±ç 
- âœ… **ç›´è¾–å¸‚JSONæ•°æ®ç»“æ„ç‰¹æ®Šå¤„ç†** â†’ å·²è½¬ç§»è‡³ `çŸ¥è¯†åº“/ArkTSè¯­æ³•.md`
  - åŒ—äº¬/ä¸Šæµ·/å¤©æ´¥/é‡åº†ç‰¹æ®Šç»“æ„å¤„ç†
- âœ… **ä¸‰çº§èœå•å®ç°é—®é¢˜ä¿®å¤æ–¹æ¡ˆ** â†’ å·²è½¬ç§»è‡³ `çŸ¥è¯†åº“/UIç»„ä»¶.md`
  - ä¸‰ä¸“å®¶å…±è¯†ï¼ˆ2026-01-13éªŒè¯é€šè¿‡ï¼‰
  - å¼‚æ­¥åŠ è½½æ—¶æœºé—®é¢˜
  - é˜²å¾¡æ€§ç¼–ç¨‹æœ€ä½³å®è·µ
- âœ… **åä¸ºMap KitåŒºå¿æ•°æ®æŸ¥è¯¢æ–¹æ¡ˆ** â†’ å·²è½¬ç§»è‡³ `çŸ¥è¯†åº“/ç¬¬ä¸‰æ–¹APIé›†æˆ.md`
  - å››ä¸“å®¶å…±è¯†ï¼ˆä½¿ç”¨æœ¬åœ°JSONï¼‰
  - Map Kitèƒ½åŠ›è¾¹ç•Œè¯´æ˜
  - æ–¹æ¡ˆå¯¹æ¯”è¡¨å’Œæˆæœ¬åˆ†æ

---

## ğŸ“‹ æ•´ç†è¯´æ˜

- âœ… **å·²è¿ç§»å†…å®¹**ï¼šå·²ç§»è‡³å¯¹åº”çŸ¥è¯†åº“åˆ†ç±»æ–‡ä»¶
- ğŸ”„ **å¾…éªŒè¯æ–¹æ¡ˆ**ï¼šä»¥ä¸‹å†…å®¹éœ€çœŸæœºéªŒè¯æˆ–è¿›ä¸€æ­¥ç¡®è®¤

---

## â˜ï¸ åä¸ºäº‘å‡½æ•°éƒ¨ç½²æµç¨‹ï¼ˆå¾…éªŒè¯ 2026-01-14ï¼‰

> **æ¥æº**: å°è‰º AI + åä¸ºæ™ºèƒ½å®¢æœï¼ˆåŒä¸“å®¶å…±è¯†ï¼‰  
> **çŠ¶æ€**: â³ **æ–¹æ¡ˆå·²ç¡®å®šï¼Œå¾…å®é™…éªŒè¯**  
> **é—®é¢˜**: äº‘å‡½æ•°éƒ¨ç½²åæµ‹è¯•æŠ¥é”™ `Cannot find module`

### æ ¸å¿ƒé—®é¢˜
**å¿…é¡»ç‚¹å‡»"æäº¤"æŒ‰é’®éƒ¨ç½²ä»£ç **ï¼Œå¦åˆ™æ–‡ä»¶ä¸ä¼šç”Ÿæ•ˆï¼

### æ ‡å‡†éƒ¨ç½²æµç¨‹

```mermaid
graph TD
    A[åˆ›å»ºå‡½æ•°] --> B[ä¸Šä¼ ä»£ç æ–‡ä»¶]
    B --> C[ç‚¹å‡»"æäº¤"æŒ‰é’®]
    C --> D[ç­‰å¾…éƒ¨ç½²å®Œæˆ]
    D --> E[é…ç½®è§¦å‘å™¨]
    E --> F[æµ‹è¯•å‡½æ•°]
```

### å…³é”®æ­¥éª¤

1. **ä¸Šä¼ ä»£ç **ï¼šåœ¨"å‡½æ•°ä»£ç "é¡µé¢ä¸Šä¼ æ–‡ä»¶ï¼ˆindex.js, cities.json, package.jsonï¼‰
2. **ç‚¹å‡»"æäº¤"**ï¼šâš ï¸ **å¿…é¡»ç‚¹å‡»"æäº¤"æŒ‰é’®**ï¼Œå¦åˆ™ä»£ç ä¸ä¼šç”Ÿæ•ˆ
3. **ç­‰å¾…éƒ¨ç½²**ï¼šè§‚å¯Ÿéƒ¨ç½²æ—¥å¿—ï¼Œç¡®è®¤ä¾èµ–å®‰è£…æˆåŠŸï¼ˆåº”æ˜¾ç¤º `axios@x.x.x` å®‰è£…è®°å½•ï¼‰
4. **æµ‹è¯•å‡½æ•°**ï¼šéƒ¨ç½²å®Œæˆåæ‰èƒ½æµ‹è¯•

### ä¾èµ–å®‰è£…æœºåˆ¶

- **åœ¨çº¿ç¼–è¾‘å™¨æ–¹å¼**ï¼šç‚¹å‡»"æäº¤"åç³»ç»Ÿè‡ªåŠ¨æ‰§è¡Œ `npm install`
- **ZIPä¸Šä¼ æ–¹å¼**ï¼šæœ¬åœ°æ‰§è¡Œ `npm install` åæ‰“åŒ… `node_modules` ä¸€èµ·ä¸Šä¼ 

### å¸¸è§é”™è¯¯åŸå› 

1. âŒ **ä¸Šä¼ æ–‡ä»¶åæœªç‚¹å‡»"æäº¤"æŒ‰é’®**ï¼ˆæœ€å¸¸è§ï¼‰
2. âŒ **ä¾èµ–æœªå®‰è£…**ï¼ˆéœ€è¦ç‚¹å‡»æäº¤è§¦å‘ï¼‰
3. âŒ **æ–‡ä»¶è·¯å¾„é”™è¯¯**ï¼ˆå…¥å£æ–‡ä»¶ä¸åœ¨æ ¹ç›®å½•ï¼‰

### éªŒè¯æ–¹æ³•

```javascript
// åœ¨ index.js é¦–è¡Œæ·»åŠ æµ‹è¯•æ—¥å¿—
console.log('[DEBUG] äº‘å‡½æ•°å…¥å£å·²åŠ è½½');

// éªŒè¯ä¾èµ–
console.log(axios.version);
```

### ä¸¤ä¸ªä¸“å®¶æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | å°è‰ºå»ºè®® | åä¸ºæ™ºèƒ½å®¢æœå»ºè®® |
|------|---------|----------------|
| **éƒ¨ç½²æ–¹å¼** | æœ¬åœ°æ‰“åŒ…ZIPï¼ˆåŒ…å«node_modulesï¼‰ä¸Šä¼  | åœ¨çº¿ç¼–è¾‘å™¨ + ç‚¹å‡»"æäº¤" |
| **ä¾èµ–å®‰è£…** | æœ¬åœ°npm installåæ‰“åŒ… | ç‚¹å‡»"æäº¤"åè‡ªåŠ¨npm install |
| **é€‚ç”¨åœºæ™¯** | å¤§æ–‡ä»¶/å¤æ‚ä¾èµ– | ç®€å•é¡¹ç›®/å¿«é€Ÿéƒ¨ç½² |

**æ¨è**ï¼šå…ˆå°è¯•åä¸ºæ™ºèƒ½å®¢æœæ–¹æ¡ˆï¼ˆåœ¨çº¿ç¼–è¾‘å™¨ + æäº¤ï¼‰ï¼Œå¦‚æœå¤±è´¥å†ç”¨å°è‰ºæ–¹æ¡ˆï¼ˆæœ¬åœ°æ‰“åŒ…ZIPï¼‰ã€‚

---

## ğŸ”§ åŸå¸‚åæ ¼å¼åŒ¹é…é—®é¢˜ âœ… å·²è½¬ç§»

> **çŠ¶æ€**: âœ… **å·²è½¬ç§»è‡³ `çŸ¥è¯†åº“/ArkTSè¯­æ³•.md`**  
> **é—®é¢˜**: getCityWithDistricts åŒ¹é…å¤±è´¥  
> **æ ¹å› **: ä¸åŒæ•°æ®æºåŸå¸‚åæ ¼å¼ä¸ä¸€è‡´ï¼ˆç©ºæ ¼ã€å…¨è§’/åŠè§’å­—ç¬¦ï¼‰

è¯¦ç»†å†…å®¹è§ `çŸ¥è¯†åº“/ArkTSè¯­æ³•.md` - [åŸå¸‚åæ ¼å¼åŒ¹é…é—®é¢˜](#åŸå¸‚åæ ¼å¼åŒ¹é…é—®é¢˜getcitywithdistricts)

---

## ğŸ”§ ä¸‰çº§èœå•å®ç°é—®é¢˜ä¿®å¤æ–¹æ¡ˆ âœ… å·²è½¬ç§»

> **æ¥æº**: å°è‰º AI + CodeGenie + å°ç±³MIMOï¼ˆä¸‰ä¸“å®¶å…±è¯†ï¼‰  
> **çŠ¶æ€**: âœ… **å·²ä¿®å¤**ï¼ˆ2026-01-13éªŒè¯é€šè¿‡ï¼‰  
> **å·²è½¬ç§»**: âœ… å·²è½¬ç§»è‡³ `çŸ¥è¯†åº“/UIç»„ä»¶.md`

**æ ¸å¿ƒé—®é¢˜**: å¼‚æ­¥åŠ è½½æ—¶æœºé—®é¢˜å¯¼è‡´ç»„ä»¶æ¸²æŸ“æ—¶æ•°æ®æœªå°±ç»ª

è¯¦ç»†å†…å®¹è§ `çŸ¥è¯†åº“/UIç»„ä»¶.md` - [ä¸‰çº§èœå•å¼‚æ­¥åŠ è½½é—®é¢˜ä¿®å¤](#ä¸‰çº§èœå•å¼‚æ­¥åŠ è½½é—®é¢˜ä¿®å¤)

---

## ğŸŒ¸ åŒºåŸŸTabä¼˜åŒ–æ–¹æ¡ˆï¼ˆå¾…éªŒè¯ 2026-01-10ï¼‰

> **æ¥æº**: å°è‰º AI + åä¸ºæ™ºèƒ½åŠ©æ‰‹ + CodeGenie
> **çŠ¶æ€**: â³ **æ–¹æ¡ˆåˆ¶å®šå®Œæˆï¼Œå¾…å®æ–½éªŒè¯**
> **é¡¹ç›®**: PollenForecast
> **ç›®æ ‡**: æŒ‰èŠ±ç²‰æµ“åº¦æ’åº + çœä»½åˆ†ç»„æŠ˜å  + å­—æ¯ç´¢å¼• + æ‹¼éŸ³æœç´¢

### ä¸€ã€æ ¸å¿ƒæ’åºé€»è¾‘ï¼ˆP0 - ä¸‰ä¸“å®¶å…±è¯†ï¼‰

```typescript
// ä¼˜å…ˆçº§ï¼šç½®é¡¶ > æ”¶è— > èŠ±ç²‰æµ“åº¦ï¼ˆä½â†’é«˜ï¼‰ > è·ç¦»
cityList.sort((a, b) => {
  // ä¼˜å…ˆçº§1ï¼šç½®é¡¶
  if (a.isTop !== b.isTop) return b.isTop ? 1 : -1;
  
  // ä¼˜å…ˆçº§2ï¼šæ”¶è—
  if (a.isFavorite !== b.isFavorite) return b.isFavorite ? 1 : -1;
  
  // ä¼˜å…ˆçº§3ï¼šèŠ±ç²‰æµ“åº¦ï¼ˆä½æµ“åº¦æ’å‰é¢ï¼‰
  if (a.pollenLevel !== undefined && b.pollenLevel !== undefined) {
    if (a.pollenLevel !== b.pollenLevel) {
      return a.pollenLevel - b.pollenLevel; // â­ æ ¸å¿ƒï¼šæµ“åº¦ä½çš„æ’å‰é¢
    }
  }
  
  // ä¼˜å…ˆçº§4ï¼šè·ç¦»ï¼ˆæ— èŠ±ç²‰æ•°æ®æ—¶å€™é€‰ï¼‰
  return a.distance - b.distance;
});
```

**éªŒè¯ç‚¹**ï¼š
- â³ èŠ±ç²‰æ•°æ®ç¼ºå¤±æ—¶ï¼Œæ˜¯å¦éœ€è¦é»˜è®¤å€¼ç­–ç•¥ï¼ˆåä¸ºå»ºè®®ï¼šå–å…¨å›½å¹³å‡å€¼ï¼‰
- â³ ç”¨æˆ·ä½“éªŒï¼šèŠ±ç²‰æµ“åº¦ä½çš„åŸå¸‚æ˜¯å¦æ˜æ˜¾æ’åœ¨å‰é¢

### äºŒã€èŠ±ç²‰æµ“åº¦å¯è§†åŒ–ï¼ˆP0 - å°è‰ºæ–¹æ¡ˆï¼‰

```typescript
// æ–¹æ¡ˆAï¼šèŠ±æœµå›¾æ ‡ï¼ˆç›´è§‚ï¼‰
ForEach(Array.from({length: city.pollenLevel}), (_, index) => {
  Image($r('app.media.pollen_icon'))
    .width(20).height(20)
})

// æ–¹æ¡ˆBï¼šé¢œè‰²åœ†ç‚¹ + æ–‡å­—ï¼ˆå·²å®ç°åŸºç¡€ï¼‰
Circle()
  .width(8)
  .height(8)
  .fill(this.getPollenColor(city.pollenLevel)) // é¢œè‰²ä»£è¡¨ç­‰çº§

Text(`èŠ±ç²‰${city.pollenLevel}çº§`)
  .fontSize(12)
  .fontColor($r('app.color.text_secondary'))
```

**éªŒè¯ç‚¹**ï¼š
- â³ èŠ±æœµå›¾æ ‡ vs é¢œè‰²åœ†ç‚¹ï¼Œå“ªä¸ªæ›´ç›´è§‚ï¼Ÿ
- â³ æ˜¯å¦éœ€è¦åŒæ—¶æ˜¾ç¤ºæ•°å€¼ + å›¾æ ‡ï¼Ÿ

### ä¸‰ã€å¤§æ•°æ®é‡æ¸²æŸ“ï¼ˆ3000+åŸå¸‚ï¼‰

#### 1. LazyForEach + è™šæ‹Ÿæ»šåŠ¨ï¼ˆä¸‰ä¸“å®¶å…±è¯†ï¼‰

```typescript
List({ scroller: this.scroller }) {
  LazyForEach(this.groupedCities, (group: CityGroup) => {
    // çœä»½åˆ†ç»„æ ‡é¢˜
    ListItem() {
      Row() {
        Text(group.title).fontSize(14)
        Text(group.isExpanded ? 'â–¼' : 'â–¶').fontSize(10)
      }
      .onClick(() => this.toggleGroup(group.key))
    }
    
    // åŸå¸‚åˆ—è¡¨ï¼ˆåªåœ¨å±•å¼€æ—¶æ¸²æŸ“ï¼‰
    if (group.isExpanded) {
      ForEach(group.cities, (city: CityItem) => {
        ListItem() { this.CityItemComponent(city) }
      })
    }
  })
}
.cachedCount(10)  // å±å¹•å¤–ç¼“å­˜é¡¹æ•°
.edgeEffect(EdgeEffect.Spring)
```

**æ€§èƒ½ç›®æ ‡**ï¼ˆåä¸ºå»ºè®®ï¼‰ï¼š
- â³ æ¸²æŸ“å¸§ç‡ â‰¥ 50fpsï¼ˆç›®æ ‡ 60fpsï¼‰
- â³ é¦–å±åŠ è½½æ—¶é—´ < 500ms
- â³ å¿«é€Ÿæ»šåŠ¨æ—¶ç™½å±é—®é¢˜ï¼ˆè°ƒæ•´ `cachedCount`ï¼‰

#### 2. æ•°æ®åˆ†çº§åŠ è½½ï¼ˆå°è‰ºæ–¹æ¡ˆï¼‰

```typescript
// é¦–å±åŠ è½½ï¼šå½“å‰çœä»½ + çƒ­é—¨åŸå¸‚ï¼ˆ<100æ¡ï¼‰
// æ»šåŠ¨åŠ è½½ï¼šæŒ‰å­—æ¯åˆ†ç»„åŠ¨æ€åŠ è½½
// èŠ±ç²‰æ•°æ®ï¼šç‹¬ç«‹æ¥å£æŒ‰éœ€åŠ è½½
```

**éªŒè¯ç‚¹**ï¼š
- â³ åˆ†æ‰¹åŠ è½½ç­–ç•¥ï¼šæ¯æ‰¹åŠ è½½å¤šå°‘ä¸ªåŸå¸‚ï¼Ÿ
- â³ èŠ±ç²‰æ•°æ®å»¶è¿Ÿæ—¶ï¼Œæ˜¯å¦æ˜¾ç¤ºåŠ è½½æŒ‡ç¤ºå™¨ï¼Ÿ

### å››ã€å­—æ¯ç´¢å¼• AlphabetIndexerï¼ˆP1 - åä¸ºæ–¹æ¡ˆï¼‰

```typescript
AlphabetIndexer({ 
  arrayValue: ['A', 'B', 'C', ..., 'Z'], 
  selected: 0 
})
.onSelect((index: number) => {
  this.scroller.scrollToIndex(index) // è·³è½¬åˆ°å¯¹åº”å­—æ¯çš„åŸå¸‚
})
```

**éªŒè¯ç‚¹**ï¼š
- â³ ä¸ List `scroller` å±æ€§çš„è”åŠ¨æ˜¯å¦æµç•…ï¼Ÿ
- â³ åˆ†ç»„æ¨¡å¼åˆ‡æ¢ï¼ˆçœä»½/å­—æ¯ï¼‰æ—¶ç´¢å¼•æ¡æ˜¯å¦åŒæ­¥ï¼Ÿ

### äº”ã€æ‹¼éŸ³æœç´¢å¢å¼ºï¼ˆP1 - å°è‰ºæ–¹æ¡ˆï¼‰

```typescript
Search({ value: this.keyword })
  .onChange((value: string) => {
    // æ”¯æŒæ±‰å­—/æ‹¼éŸ³/é¦–å­—æ¯æ··åˆæœç´¢
    this.filteredCities = this.allCities.filter(city => 
      city.name.includes(value) ||                    // æ±‰å­—åŒ¹é…
      city.pinyin.includes(value.toLowerCase()) ||    // å…¨æ‹¼åŒ¹é…
      city.shortPinyin.includes(value.toLowerCase())  // é¦–å­—æ¯åŒ¹é…
    );
  })
```

**æ•°æ®ç»“æ„å¢å¼º**ï¼ˆåä¸ºå»ºè®®ï¼‰ï¼š
```typescript
interface CityItem {
  name: string;         // åŸå¸‚åç§°
  adcode: string;       // è¡Œæ”¿åŒºåˆ’ä»£ç 
  pinyin: string;       // å…¨æ‹¼ï¼ˆå¦‚"haidianshi"ï¼‰
  shortPinyin: string;  // é¦–å­—æ¯ï¼ˆå¦‚"hds"ï¼‰
  pollenLevel: number;  // èŠ±ç²‰æµ“åº¦ç­‰çº§ (1-5çº§)
  distance: number;     // ç”¨æˆ·è·ç¦»ï¼ˆå…¬é‡Œï¼‰
  province?: string;    // æ‰€å±çœä»½
  lastUpdated?: number; // èŠ±ç²‰æ•°æ®æ›´æ–°æ—¶é—´æˆ³
}
```

**éªŒè¯ç‚¹**ï¼š
- â³ æ‹¼éŸ³è½¬æ¢æ€§èƒ½ï¼šé¢„ç”Ÿæˆ vs å®æ—¶è®¡ç®—ï¼ˆåä¸ºå»ºè®®ï¼šé¢„ç”Ÿæˆï¼‰
- â³ æœç´¢å†å²è®°å½•ï¼šä½¿ç”¨ `Preferences` æŒä¹…åŒ–å­˜å‚¨ï¼ˆæœ€è¿‘10æ¡ï¼‰

### å…­ã€èŠ±ç²‰æ•°æ®ç¼“å­˜ç­–ç•¥ï¼ˆåä¸ºå»ºè®®ï¼‰

```typescript
// ä¸¤çº§ç¼“å­˜ï¼šå†…å­˜ + æœ¬åœ°æ•°æ®åº“
const pollenCache = new LRUCache<string, PollenData>({
  maxAge: 30 * 60 * 1000  // TTL: 30åˆ†é’Ÿ
});

// å·®å¼‚å¯¹æ¯”æ›´æ–°ï¼ˆé¿å…å…¨é‡åˆ·æ–°ï¼‰
if (oldData.pollenLevel !== newData.pollenLevel) {
  // åªæ›´æ–°å˜åŒ–çš„åŸå¸‚
  this.updateCityPollenData(city.name, newData);
}
```

### ä¸ƒã€å®æ–½ä¼˜å…ˆçº§æ¨è

| é˜¶æ®µ | å…³é”®ä»»åŠ¡ | å‘¨æœŸé¢„ä¼° | çŠ¶æ€ |
|------|----------|----------|------|
| **æ•°æ®å±‚** | èŠ±ç²‰æœåŠ¡æ”¹é€  + ç¼“å­˜æœºåˆ¶ | 3äººæ—¥ | â³ å¾…å®æ–½ |
| **è§†å›¾å±‚** | åˆ†ç»„åˆ—è¡¨ + æ‹¼éŸ³æœç´¢ | 5äººæ—¥ | â³ å¾…å®æ–½ |
| **æ€§èƒ½å±‚** | è™šæ‹Ÿæ»šåŠ¨ + åˆ†æ‰¹åŠ è½½ | 4äººæ—¥ | â³ å¾…å®æ–½ |

### å…«ã€é£é™©è§„é¿

| é£é™©é¡¹ | ç¼“è§£æ–¹æ¡ˆ | éªŒè¯çŠ¶æ€ |
|---------|----------|----------|
| å¤§æ•°æ®é‡æ¸²æŸ“å¡é¡¿ | LazyForEach + cachedCount(10) | â³ å®æµ‹å¯æ”¯æŒ5000+åŸå¸‚ |
| èŠ±ç²‰æ•°æ®å»¶è¿Ÿ | é»˜è®¤æ˜¾ç¤ºå†å²æ•°æ® + åŠ è½½æŒ‡ç¤ºå™¨ | â³ å¾…éªŒè¯ |
| å¿«é€Ÿæ»šåŠ¨ç™½å± | è°ƒæ•´ cachedCount å‚æ•° | â³ å¾…å‹æµ‹ |
| èŠ±ç²‰æ•°æ®ç¼ºå¤± | é™çº§è‡ªåŠ¨åˆ‡æ¢è·ç¦»æ’åº | â³ å¾…éªŒè¯ |

### ä¹ã€ä¸ç°æœ‰åŠŸèƒ½å…¼å®¹æ€§

| ç°æœ‰åŠŸèƒ½ | å…¼å®¹æ–¹æ¡ˆ | çŠ¶æ€ |
|------------|----------|------|
| æ»‘åŠ¨æ‰‹åŠ¿ï¼ˆSwipeActionï¼‰ | ä¿ç•™ï¼Œæ‰‹åŠ¿ä¸å†²çª | âœ… å·²éªŒè¯ |
| æ”¶è—/ç½®é¡¶ | æ’åºé€»è¾‘ä¼˜å…ˆçº§ä¿ç•™ | âœ… å·²éªŒè¯ |
| çœä»½åˆ†ç»„æŠ˜å  | é»˜è®¤æŠ˜å ï¼Œç‚¹å‡»å±•å¼€ | âœ… å·²ä¿®å¤ |
| ä¸‹æ‹‰åˆ·æ–° | é›†æˆèŠ±ç²‰æ•°æ®æ›´æ–°æœºåˆ¶ | â³ å¾…å®æ–½ |
| è·ç¦»æ’åº | ä½œä¸ºèŠ±ç²‰æ•°æ®çš„åå¤‡æ’åºæ¡ä»¶ | âœ… å·²è®¾è®¡ |

---

## ğŸŒ¸ åŒºåŸŸé¡µåŸå¸‚èŠ±ç²‰æ•°æ®è·å–æ¶æ„ï¼ˆå¾…éªŒè¯ 2026-01-16ï¼‰

> **æ¥æº**: å°ç±³MIMO + å°è‰º + åä¸ºæ™ºèƒ½å®¢æœ + CodeGenie + è±†åŒ…ï¼ˆå¤šä¸“å®¶æ–¹æ¡ˆäº¤é›†ï¼‰  
> **çŠ¶æ€**: â³ æ–¹æ¡ˆå·²å½¢æˆï¼Œå¾…å®é™…å®æ–½/å‹æµ‹  
> **é¡¹ç›®**: PollenForecast  
> **å…³è”é—®é¢˜**: åŒºåŸŸé¡µåŸå¸‚åˆ—è¡¨èŠ±ç²‰é¢„è§ˆæ‰€æœ‰åŸå¸‚æ˜¾ç¤ºåŒä¸€ç­‰çº§ï¼ˆAUTO æ¨¡å¼é”™è¯¯ä½¿ç”¨ `currentCity`ï¼‰

### ä¸€ã€é—®é¢˜èƒŒæ™¯ä¸æ ¹å› ï¼ˆä¸“å®¶å…±è¯†ï¼‰

- åŒºåŸŸé¡µéœ€è¦ä¸ºçº¦ 20 ä¸ªåŸå¸‚å±•ç¤ºèŠ±ç²‰ç­‰çº§å°åœ†ç‚¹ï¼Œåç»­è§„åˆ’æ‰©å±•åˆ°å…¨å›½ 3210 ä¸ªåŒºåŸŸã€‚  
- æ•èˆ’ API éœ€æŒ‰ **adcode** å•åŸå¸‚æŸ¥è¯¢ï¼›Google API å¯æŒ‰ **ç»çº¬åº¦** æŸ¥è¯¢ã€‚  
- å½“å‰å®ç°ä¸­ï¼ŒAUTO/MINSHU æ¨¡å¼ä¸‹ `PollenService.getPollenForecast` ä½¿ç”¨ `AppStorage.get('currentCity')` ä½œä¸ºåŸå¸‚åï¼Œ
  å¯¼è‡´ **æ‰€æœ‰åŸå¸‚éƒ½æŸ¥åŒä¸€åŸå¸‚çš„æ•èˆ’æ•°æ®**ï¼ŒåŒºåŸŸé¡µåˆ—è¡¨å°åœ†ç‚¹é¢œè‰²å®Œå…¨ç›¸åŒã€‚

### äºŒã€çŸ­æœŸå¯è½åœ°çš„ã€Œæœ€å°æ”¹åŠ¨æ–¹æ¡ˆã€ï¼ˆå¾…éªŒè¯ï¼‰

- **æ–¹æ¡ˆ Aï¼šåŒºåŸŸé¢„è§ˆå¼ºåˆ¶èµ° Google**  
  - RegionView ä¸­æ‰¹é‡é¢„è§ˆæ—¶ï¼Œä¸èµ° AUTO åˆ†æ”¯ï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨ `getPollenForecastFromGoogle(lat, lng, 1)`ã€‚  
  - åŒºåŸŸé¡µä»…ç”¨äºã€Œé¢„è§ˆã€ï¼Œå…è®¸æ•°æ®æºä¸é¦–é¡µè¯¦æƒ…ç•¥æœ‰å·®å¼‚ã€‚  
  - é¦–é¡µè¯¦æƒ…ä»æŒ‰ç”¨æˆ·è®¾ç½®ä½¿ç”¨æ•èˆ’ / AUTO é€»è¾‘ï¼Œä¿è¯æƒå¨æ€§ã€‚

- **æ–¹æ¡ˆ Bï¼šä¸º AUTO æ¨¡å¼è¡¥å…… cityName/adcode å‚æ•°**  
  - RegionView è°ƒç”¨ `getPollenForecast` æ—¶é¢å¤–ä¼ å…¥åŸå¸‚åæˆ–é¢„å…ˆè®¡ç®—å¥½çš„ adcodeã€‚  
  - PollenService åœ¨ AUTO åˆ†æ”¯ä¸­ä¸å†ä» AppStorage è·å– `currentCity`ï¼Œè€Œæ˜¯ä½¿ç”¨è°ƒç”¨æ–¹å‚æ•°å†³å®šæ˜¯å¦èµ°æ•èˆ’ã€‚  
  - ä¿æŒå•ä¸€æ•°æ®æºï¼ˆæ•èˆ’ï¼‰çš„ä¸€è‡´æ€§ï¼ŒåŒæ—¶ä¿®å¤ã€Œæ‰€æœ‰åŸå¸‚å¤ç”¨ currentCityã€çš„æ ¹å› ã€‚

> ä»¥ä¸Šä¸¤ç§æ–¹æ¡ˆæ”¹åŠ¨èŒƒå›´å°ï¼Œå¯ä½œä¸º **ç¬¬ä¸€é˜¶æ®µéªŒè¯**ï¼šå…ˆè§£å†³ã€Œæ‰€æœ‰åŸå¸‚åŒä¸€æ•°æ®ã€çš„ç¡¬ Bugï¼Œå†è€ƒè™‘å¤§è§„æ¨¡æ‰©å±•æ¶æ„ã€‚

### ä¸‰ã€ä¸­é•¿æœŸæ¨èæ¶æ„è¦ç‚¹ï¼ˆå¤šä¸“å®¶å…±è¯†æ–¹å‘ï¼‰

- **åœºæ™¯åˆ†ç¦»**  
  - åŒºåŸŸé¡µé¢„è§ˆï¼šä»¥ã€Œè½»é‡çº§ã€å¯ç¼“å­˜ã€ä¸ºç›®æ ‡ï¼Œå¯æ¥å—ä¸€å®šå»¶è¿Ÿæˆ–ä½¿ç”¨ç¼“å­˜/å…œåº•æ•°æ®ï¼›  
  - é¦–é¡µè¯¦æƒ… & æ•°æ®åˆ†æé¡µï¼šä»¥ã€Œæ•èˆ’æƒå¨æ•°æ®ã€ä¸ºä¸»ï¼Œå…è®¸æ›´é«˜çš„å•æ¬¡è¯·æ±‚æˆæœ¬ã€‚

- **ä¸‰å±‚æ•°æ®æ¶æ„**  
  1. å®¢æˆ·ç«¯å±‚ï¼š`PollenService` + `PollenCacheManager`  
     - ç®¡ç†å†…å­˜ç¼“å­˜ï¼ˆL1ï¼‰ä¸æœ¬åœ°å­˜å‚¨/KVDBï¼ˆL2ï¼‰ï¼Œç»Ÿä¸€å¯¹ UI æš´éœ² `getBatchPollenForecast` / `getPollenPreview` ç­‰æ¥å£ã€‚  
  2. æœåŠ¡ç«¯ä»£ç†å±‚ï¼šè‡ªå»º `/minshu/pollen/batch` æ‰¹é‡æ¥å£  
     - å†…éƒ¨å¹¶å‘è°ƒç”¨æ•èˆ’å•æ¬¡æ¥å£ï¼Œåšç»“æœèšåˆä¸é™æµæ§åˆ¶ï¼›  
     - ä½¿ç”¨ Redis ç­‰ç¼“å­˜ã€Œadcode + æ—¥æœŸã€å¯¹åº”çš„èŠ±ç²‰ç»“æœï¼ˆTTL 24 å°æ—¶ï¼‰ï¼›  
     - å•ä¸ªåŸå¸‚æŸ¥è¯¢å¤±è´¥å¯é€‰ç”¨ Google æˆ–æ ‡è®°ä¸ºæ— æ•°æ®ï¼Œä¸é˜»æ–­æ•´æ‰¹ç»“æœã€‚  
  3. åº•å±‚æ•°æ®æºï¼šæ•èˆ’å•æ¬¡æ¥å£ + Google å…œåº•ã€‚

- **ç¼“å­˜ä¸è¯·æ±‚ç­–ç•¥ï¼ˆä¸“å®¶æ–¹æ¡ˆçš„å…±åŒéƒ¨åˆ†ï¼‰**  
  - L1ï¼šå†…å­˜ LRU ç¼“å­˜ï¼ˆå‡ åæ¡ï¼Œ5~30 åˆ†é’Ÿ TTLï¼‰ï¼Œä¼˜å…ˆå‘½ä¸­é«˜é¢‘åŸå¸‚ï¼›  
  - L2ï¼šKVDB / æœ¬åœ°æŒä¹…åŒ–ç¼“å­˜ï¼ˆ1 å°æ—¶æˆ– 24 å°æ—¶ TTLï¼‰ï¼ŒæŒ‰ `pollen_${adcode}_${date}` ç»„ç»‡ï¼›  
  - L3ï¼šé¢„è®¡ç®—é™æ€ç­‰çº§ï¼ˆå¦‚æŒ‰çœä»½æˆ–çƒ­é—¨åŸå¸‚çš„æ—¥å‡èŠ±ç²‰ç­‰çº§ï¼‰ï¼Œåœ¨å¼±ç½‘/ç¦»çº¿æ—¶å…œåº•ï¼›  
  - æ‰¹é‡è¯·æ±‚ï¼šå®¢æˆ·ç«¯æŒ‰å¯è§†åŸå¸‚æ”¶é›† adcode åˆ—è¡¨ï¼Œåˆå¹¶ä¸º 1~N æ¬¡ä»£ç†æ‰¹é‡è¯·æ±‚ï¼Œè€Œé N æ¬¡æ•èˆ’å•æ¬¡è°ƒç”¨ã€‚

### å››ã€å¾…éªŒè¯äº‹é¡¹

- æœåŠ¡ç«¯æ˜¯å¦å…·å¤‡éƒ¨ç½²ä»£ç†å±‚çš„æ¡ä»¶ï¼ˆNode.js / Java ä»»ä¸€åç«¯ï¼‰ï¼›è‹¥çŸ­æœŸæ— æ³•ä¸Šçº¿ï¼Œå¯æš‚æ—¶é‡‡ç”¨ã€Œé¢„è§ˆèµ° Googleã€è¯¦æƒ…èµ°æ•èˆ’ã€çš„è¿‡æ¸¡æ–¹æ¡ˆã€‚  
- KVDB + æ‰¹é‡è¯·æ±‚åœ¨ 50~100 åŸå¸‚ã€ä»¥åŠæœªæ¥ 3000+ åŒºåŸŸæƒ…å†µä¸‹çš„æ€§èƒ½ä¸å†…å­˜å ç”¨ï¼ˆéœ€è¦çœŸæœºå‹æµ‹ï¼‰ã€‚  
- äº§å“å±‚é¢æœ€ç»ˆç¡®å®šï¼šåŒºåŸŸé¡µé¢„è§ˆä¸é¦–é¡µè¯¦æƒ…æ˜¯å¦å¿…é¡»å®Œå…¨ä½¿ç”¨åŒä¸€æ•°æ®æºï¼Œè¿˜æ˜¯å…è®¸ã€Œé¢„è§ˆ Google + è¯¦æƒ…æ•èˆ’ã€çš„é˜¶æ®µæ€§æ–¹æ¡ˆã€‚

> è¯¦ç»†è®¨è®ºã€ä»£ç ç¤ºä¾‹ä¸ä¸åŒ AI çš„å®Œæ•´å›ç­”ï¼Œå¯å‚è€ƒ `PollenForecast/figma/æ—¥å¿—.md` ä¸­å¯¹åº”é—®é¢˜æ®µè½ï¼ˆâ€œåŒºåŸŸé¡µåŸå¸‚åˆ—è¡¨å¦‚ä½•é«˜æ•ˆå±•ç¤ºå„åŸå¸‚çš„èŠ±ç²‰ç­‰çº§æ•°æ®â€ï¼‰ã€‚

---

## âš ï¸ MapKit API 17 å…¼å®¹æ€§ï¼ˆå¾…éªŒè¯ 2026-01-05ï¼‰

> **æ¥æº**: CodeGenie + åä¸ºæ™ºèƒ½åŠ©æ‰‹
> **çŠ¶æ€**: â³ **æœ‰äº‰è®®ï¼Œéœ€çœŸæœºéªŒè¯**
> **é¡¹ç›®**: PollenForecast

### ä¸€ã€äº‹ä»¶ç›‘å¬æ›¿ä»£æ–¹æ¡ˆï¼ˆæœ€å…³é”®ï¼‰

**ä¸¤ä¸ªä¸“å®¶æ–¹æ¡ˆæœ‰äº‰è®®**ï¼š

#### CodeGenie æ–¹æ¡ˆï¼ˆä¼˜å…ˆå°è¯•ï¼‰
```typescript
// ç›´æ¥åœ¨ controller ä¸Šç›‘å¬äº‹ä»¶
this.mapController.on('markerClick', (marker: map.Marker) => { ... })
this.mapController.on('myLocationButtonClick', () => { ... })
this.mapController.on('cameraMoveEnd', () => { ... })
```

#### åä¸ºæ™ºèƒ½åŠ©æ‰‹æ–¹æ¡ˆï¼ˆå¤‡é€‰ï¼‰
```typescript
// ç»„ä»¶çº§äº‹ä»¶ï¼ˆæ ‡è®°ç‚¹å‡»ï¼‰
MapComponent({
  onMarkerClick(event: { marker: map.Marker }) {
    // å¤„ç†æ ‡è®°ç‚¹å‡»é€»è¾‘
  }
})

// è‡ªå®šä¹‰æ§ä»¶ï¼ˆå®šä½æŒ‰é’®ï¼‰
Button('å®šä½').onClick(() => { ... })

// è½®è¯¢æ–¹æ¡ˆï¼ˆç›¸æœºå˜åŒ–ï¼‰
setInterval(async () => {
  const position = await controller.getCameraPosition();
}, 500);
```

**éªŒè¯æ­¥éª¤**ï¼š
1. â³ åœ¨ API 17 è®¾å¤‡ä¸Šæµ‹è¯• `controller.on()` æ˜¯å¦å¯ç”¨
2. â³ å¦‚æœä¸å¯ç”¨ï¼Œåˆ‡æ¢åˆ°ç»„ä»¶çº§äº‹ä»¶æ–¹æ¡ˆ
3. â³ è®°å½•å®é™…å¯ç”¨çš„æ–¹æ¡ˆ

### äºŒã€åæ ‡è½¬æ¢ï¼ˆæœ‰äº‰è®®ï¼‰

**ä¸¤ä¸ªä¸“å®¶æ„è§ç›¸å**ï¼š

| ä¸“å®¶ | æ„è§ |
|------|------|
| CodeGenie | `animateCamera()` **æ— éœ€**å‰ç½®åæ ‡è½¬æ¢ |
| åä¸ºæ™ºèƒ½åŠ©æ‰‹ | `animateCamera()` **éœ€è¦å…ˆè½¬æ¢åæ ‡** |

**éªŒè¯å»ºè®®**ï¼š
1. â³ å…ˆå°è¯•ä¸ä½¿ç”¨åæ ‡è½¬æ¢ï¼ˆCodeGenie æ–¹æ¡ˆï¼‰
2. â³ å¦‚æœå‡ºç°ä½ç½®åç§»ï¼Œå†æ·»åŠ  `convertCoord()` é¢„å¤„ç†

**åæ ‡è½¬æ¢ä»£ç ï¼ˆå¤‡ç”¨ï¼‰**ï¼š
```typescript
// å¦‚æœéœ€è¦åæ ‡è½¬æ¢
map.convertCoord(rawCoordinate, (err, convertedCoord) => {
  if (!err) {
    const cameraUpdate = map.newCameraPosition({
      target: convertedCoord,
      zoom: 14
    });
    controller.animateCamera(cameraUpdate, 1000);
  }
});
```

### ä¸‰ã€MarkerOptions.snippetï¼ˆæœ‰äº‰è®®ï¼‰

| ä¸“å®¶ | æ„è§ |
|------|------|
| CodeGenie | `snippet` åœ¨ API 17 ä¸­**æ— æ•ˆ**ï¼Œéœ€ç”¨è‡ªå®šä¹‰ InfoWindow |
| åä¸ºæ™ºèƒ½åŠ©æ‰‹ | `snippet` **æ”¯æŒ**ï¼Œä¿¡æ¯çª—å‰¯æ–‡æœ¬æ­£å¸¸æ˜¾ç¤º |

**éªŒè¯å»ºè®®**ï¼š
1. â³ å…ˆå°è¯•ä½¿ç”¨ `snippet`ï¼ˆåä¸ºæ™ºèƒ½åŠ©æ‰‹æ–¹æ¡ˆï¼‰
2. â³ å¦‚æœæ— æ•ˆï¼Œå†ä½¿ç”¨è‡ªå®šä¹‰ InfoWindow

### å››ã€å·²çŸ¥é—®é¢˜ä¸è§„é¿æªæ–½

| é—®é¢˜ç°è±¡ | å½±å“ç‰ˆæœ¬ | è§£å†³æ–¹æ¡ˆ |
|---------|---------|---------|
| æ ‡è®°ç‚¹å‡»åæ ‡åç§» | API 17 | å¢åŠ  5px ç‚¹å‡»çƒ­åŒºè¡¥å¿ |
| 3D å»ºç­‘å±‚æ˜¾ç¤ºå¼‚å¸¸ | API 17 | åˆå§‹åŒ–æ—¶å…³é—­ `setBuildingEnabled` |
| åœ°å›¾ç¼©æ”¾æ‰‹åŠ¿å†²çª | API 17 | é€šè¿‡ `MapOptions.gesturesEnabled` é‡ç½®æ‰‹åŠ¿é…ç½® |
| padding å¸ƒå±€å·®å¼‚ | API 17 | å»ºè®®å¢åŠ  8% è¾¹è·è¡¥å¿ |

### äº”ã€éªŒè¯æ¸…å•

| åŠŸèƒ½ | API 20 | API 17 | éªŒè¯çŠ¶æ€ |
|------|--------|--------|---------|
| åœ°å›¾åˆå§‹åŒ– | âœ… | âœ…ï¼ˆä¸“å®¶ç¡®è®¤ï¼‰ | â³ å¾…çœŸæœº |
| åœ°å›¾æ˜¾ç¤º | âœ… | âœ…ï¼ˆä¸“å®¶ç¡®è®¤ï¼‰ | â³ å¾…çœŸæœº |
| æ ‡è®°ç‚¹å‡»ï¼ˆEventManagerï¼‰ | âœ… | âŒï¼ˆä¸æ”¯æŒï¼‰ | âœ… å·²çŸ¥ |
| æ ‡è®°ç‚¹å‡»ï¼ˆcontroller.onï¼‰ | - | â³ | â³ å¾…éªŒè¯ |
| æ ‡è®°ç‚¹å‡»ï¼ˆç»„ä»¶äº‹ä»¶ï¼‰ | - | â³ | â³ å¤‡é€‰ |
| å®šä½æŒ‰é’® | âœ… ç³»ç»Ÿæ§ä»¶ | â³ è‡ªå®šä¹‰ | â³ å¾…éªŒè¯ |
| ç›¸æœºå˜åŒ–ç›‘å¬ | âœ… cameraIdle | â³ cameraMoveEnd | â³ å¾…éªŒè¯ |
| åœ°å›¾è·³è½¬ï¼ˆanimateCameraï¼‰ | âœ… | â³ï¼ˆåæ ‡è½¬æ¢ï¼Ÿï¼‰ | â³ å¾…éªŒè¯ |
| æ ‡è®°ä¿¡æ¯çª—ï¼ˆsnippetï¼‰ | âœ… | â³ï¼ˆæœ‰äº‰è®®ï¼‰ | â³ å¾…éªŒè¯ |

---

## ğŸ”§ åŸå­æœåŠ¡å¡ç‰‡APIä¿®å¤ï¼ˆå››ä¸“å®¶å…±è¯†ï¼Œ2025-12-28ï¼‰

> **éªŒè¯çŠ¶æ€**: ğŸ”„ **å·²å®æ–½ï¼Œå¾…æ„å»ºéªŒè¯**
> **é—®é¢˜èƒŒæ™¯**: FormAbilityæœªè¢«è°ƒç”¨ï¼Œå¡ç‰‡æ˜¾ç¤ºé»˜è®¤æ•°æ®ï¼ˆ0å¼ ï¼‰è€Œéå®é™…æ•°æ®ï¼ˆ3æ¡ï¼‰
> **ä¸“å®¶æ¥æº**: CodeGenieã€å°ç±³MIMOã€åä¸ºæ™ºèƒ½åŠ©æ‰‹ã€è±†åŒ…

### ğŸ¯ ç¬¬å…­è½®å››ä¸“å®¶æ ¸å¿ƒå…±è¯†ï¼ˆ100% ä¸€è‡´ï¼‰

| é—®é¢˜ | å››ä¸“å®¶å…±è¯†ç­”æ¡ˆ | ä¿®å¤çŠ¶æ€ |
|------|---------------|----------|
| **formConfigAbility æ ¼å¼** | å¿…é¡»å« bundleNameï¼š`ability://bundleName/FormAbility` | âœ… å·²ä¿®å¤ |
| **PROVIDE_FORM æƒé™** | å¿…é¡»å£°æ˜ | âœ… å·²ä¿®å¤ |
| **DISTRIBUTED_DATASYNC** | ä¸å¡ç‰‡æ— å…³ï¼Œæ— éœ€å£°æ˜ | âœ… å·²ç§»é™¤ |
| **type å­—æ®µ** | API 20 ä¸æ”¯æŒ | âœ… æœªæ·»åŠ  |
| **formEnable** | API 20 ä¸æ”¯æŒ | âœ… æœªæ·»åŠ  |

### âœ… å·²å®æ–½çš„ä¿®å¤ï¼ˆ2025-12-28ï¼‰

**1. form_config.json**ï¼š
```json
// âœ… ç°åœ¨ï¼ˆæ­£ç¡® - åŒ…å«å®Œæ•´ bundleNameï¼‰
"formConfigAbility": "ability://com.eric.EXIFPhotoParamTool/FormAbility"
```

**2. module.json5**ï¼š
```json
// âœ… ç°åœ¨ï¼ˆæ­£ç¡®æƒé™ï¼‰
"requestPermissions": [{ "name": "ohos.permission.PROVIDE_FORM" }]
"permissions": ["ohos.permission.PROVIDE_FORM"]
```

**æ ¸å¿ƒé—®é¢˜**ï¼š
- âœ… æ„å»ºæˆåŠŸï¼Œæ— ç¼–è¯‘é”™è¯¯
- âœ… å¡ç‰‡UIæ­£å¸¸æ˜¾ç¤ºï¼ˆå·²æ·»åŠ åˆ°æ¡Œé¢ï¼‰
- âŒ **FormAbility.onAddForm ä»æœªè¢«è°ƒç”¨**ï¼ˆæ—¥å¿—å®Œå…¨ç¼ºå¤±ï¼‰
- âŒ å¡ç‰‡æ˜¾ç¤ºé»˜è®¤æ•°æ®ï¼ˆ0å¼ ï¼‰ï¼Œè€Œä¸æ˜¯å®é™…æ•°æ®ï¼ˆ3æ¡ï¼‰

---

## ğŸ”§ æŠ€æœ¯å€ºåŠ¡æ¸…ç†æ–¹æ¡ˆï¼ˆè±†åŒ…ä¸“å®¶ï¼Œ2025-12-28ï¼‰

> **éªŒè¯çŠ¶æ€**: â³ å¾…å®æ–½éªŒè¯
> **é—®é¢˜èƒŒæ™¯**: TaskPoolå¹¶å‘æ§åˆ¶ã€Nativeå¼‚å¸¸å¤„ç†è§„èŒƒ
> **ä¸“å®¶æ¥æº**: è±†åŒ…

### ä¸€ã€TaskPoolå¹¶å‘æ§åˆ¶ï¼ˆEXIFè§£æ/æ‰¹é‡å¯¼å‡ºåœºæ™¯ï¼‰

#### æ ¸å¿ƒé—®é¢˜
æ‰¹é‡è§£æRAWæ–‡ä»¶ã€æ‰¹é‡å¯¼å‡ºJSON/CSVæ—¶ï¼Œè‹¥ç›´æ¥ç”¨TaskPoolæ— æ§å¹¶å‘ï¼Œæ˜“å¯¼è‡´CPUå ç”¨è¿‡é«˜ï¼ˆ>80%ï¼‰ã€UIå¡é¡¿ï¼Œç”šè‡³è§¦å‘é¸¿è’™ç³»ç»Ÿçš„"å¹¶å‘é™åˆ¶"è­¦å‘Šã€‚

#### è½åœ°æ–¹æ¡ˆ

| åœºæ™¯ | å¹¶å‘ç­–ç•¥ | æŠ€æœ¯ç»†èŠ‚ |
|------|----------|----------|
| EXIFæ‰¹é‡è§£æ | åŠ¨æ€å¹¶å‘æ•°ï¼ˆåŸºäºè®¾å¤‡æ€§èƒ½ï¼‰ | â‘  é€šè¿‡`systemCapability`è·å–è®¾å¤‡CPUæ ¸å¿ƒæ•°ï¼ˆé¸¿è’™NEXT API 20æ”¯æŒï¼‰ï¼›<br>â‘¡ æ‰‹æœºç«¯ï¼ˆ8æ ¸ï¼‰è®¾æœ€å¤§å¹¶å‘æ•°=4ï¼Œå¹³æ¿ç«¯ï¼ˆ12æ ¸ï¼‰è®¾=6ï¼›<br>â‘¢ ç»™TaskPoolä»»åŠ¡æ·»åŠ "ä¼˜å…ˆçº§æ ‡è®°"ï¼ˆæ ¸å¿ƒå‚æ•°è§£æ>P2å­—æ®µè§£æï¼‰ã€‚ |
| æ‰¹é‡å¯¼å‡º | ä¸²è¡Œ+åˆ†å—å¹¶å‘ç»“åˆ | â‘  æŒ‰"æ¯10å¼ ç…§ç‰‡"åˆ†å—ï¼Œå—å†…å¹¶å‘ï¼ˆæœ€å¤§2ï¼‰ï¼Œå—é—´ä¸²è¡Œï¼›<br>â‘¡ å¯¼å‡ºè¿‡ç¨‹ä¸­ç›‘å¬UIçº¿ç¨‹çŠ¶æ€ï¼Œè‹¥æ£€æµ‹åˆ°UIå¸§ç‡<50fpsï¼Œè‡ªåŠ¨æš‚åœå½“å‰TaskPoolä»»åŠ¡ï¼Œä¼˜å…ˆä¿éšœUIå“åº”ã€‚ |

#### é¿å‘ç‚¹
- ç¦æ­¢åœ¨TaskPoolä¸­æ“ä½œUIå¯¹è±¡ï¼ˆå¦‚`Text`/`Image`ï¼‰ï¼Œéœ€é€šè¿‡`postMessage`å›è°ƒåˆ°ä¸»çº¿ç¨‹æ›´æ–°è¿›åº¦ï¼›
- ç»™TaskPoolä»»åŠ¡æ·»åŠ è¶…æ—¶æ§åˆ¶ï¼ˆé»˜è®¤10sï¼‰ï¼Œé¿å…æŸå¼ æŸåç…§ç‰‡å¯¼è‡´æ•´ä¸ªæ‰¹é‡ä»»åŠ¡å¡æ­»ï¼ˆå·²æœ‰try-catchåŸºç¡€ä¸Šè¡¥å……è¶…æ—¶ä¸­æ–­ï¼‰ã€‚

### äºŒã€Nativeå¼‚å¸¸å¤„ç†è§„èŒƒï¼ˆC++è§£æRAWåœºæ™¯ï¼‰

#### æ ¸å¿ƒé—®é¢˜
å½“å‰Nativeè§£æä»…åšåŸºç¡€try-catchï¼Œæœªè§„èŒƒå¼‚å¸¸åˆ†ç±»ï¼Œå¯¼è‡´é—®é¢˜å®šä½å›°éš¾ï¼ˆå¦‚"DNGå­—æ®µè§£æå¤±è´¥"æ— æ³•åŒºåˆ†æ˜¯æ ¼å¼ä¸æ”¯æŒè¿˜æ˜¯æ–‡ä»¶æŸåï¼‰ã€‚

#### è½åœ°æ–¹æ¡ˆ

â‘  **å¼‚å¸¸åˆ†ç±»æšä¸¾**ï¼ˆåœ¨cppå±‚å®šä¹‰ï¼‰ï¼š
```cpp
enum ExifNativeError {
  ERR_FILE_NOT_EXIST = 1001,    // æ–‡ä»¶ä¸å­˜åœ¨
  ERR_RAW_FORMAT_UNSUPPORT = 1002, // ä¸æ”¯æŒçš„RAWæ ¼å¼ï¼ˆè¶…å‡º19ç§ï¼‰
  ERR_FIELD_PARSE_FAIL = 1003,  // å•ä¸ªå­—æ®µè§£æå¤±è´¥
  ERR_MEMORY_OVERFLOW = 1004    // å†…å­˜æº¢å‡ºï¼ˆè¶…å¤§æ–‡ä»¶ï¼‰
};
```

â‘¡ **å¼‚å¸¸é€ä¼ è§„åˆ™**ï¼š
- Nativeå±‚æ•è·å¼‚å¸¸åï¼Œå°†"é”™è¯¯ç +é”™è¯¯æè¿°"é€šè¿‡JNIè¿”å›ç»™ArkTSå±‚ï¼›
- ArkTSå±‚åœ¨`ExifParserService.ets`ä¸­ç»Ÿä¸€å¤„ç†ï¼Œå¯¹`ERR_FIELD_PARSE_FAIL`ä»…è®°å½•æ—¥å¿—ï¼ˆä¸é˜»æ–­è§£æï¼‰ï¼Œå¯¹`ERR_MEMORY_OVERFLOW`å¼¹çª—æç¤ºç”¨æˆ·"æ–‡ä»¶è¿‡å¤§ï¼Œä»…è§£ææ ¸å¿ƒå‚æ•°"ã€‚

â‘¢ **æ—¥å¿—è§„èŒƒ**ï¼š
- æ‰€æœ‰Nativeå¼‚å¸¸æ—¥å¿—æ·»åŠ "ç…§ç‰‡ID+é”™è¯¯ç "ï¼Œä¾¿äºå®šä½é—®é¢˜ï¼ˆå¦‚"PhotoID:123, Error:1002, Msg:CR3æ ¼å¼ç‰ˆæœ¬ä¸æ”¯æŒ"ï¼‰ã€‚

### ä¸‰ã€ä¼˜å…ˆçº§å»ºè®®

| ä¼˜å…ˆçº§ | å†…å®¹ | è½åœ°å‘¨æœŸ |
|--------|------|----------|
| P0ï¼ˆæœ¬å‘¨ï¼‰ | TaskPoolå¹¶å‘æ§åˆ¶è½åœ°ã€Nativeå¼‚å¸¸åˆ†ç±»æšä¸¾ã€radiusè­¦å‘Šå±è”½ | 1-2å¤© |
| P1ï¼ˆæœ¬å‘¨ï¼‰ | KVDBäº‹åŠ¡ä¼˜åŒ–ã€åŸå­å¡ç‰‡æ•°æ®åŒæ­¥æ ¡éªŒã€å¼‚å¸¸ç”¨ä¾‹è¡¥å…… | 2-3å¤© |
| P2ï¼ˆä¸‹å‘¨ï¼‰ | LRUç¼“å­˜é¢„çƒ­ã€ä»£ç æ³¨é‡Šæ¨¡æ¿ã€æŠ€æœ¯å€ºåŠ¡å°è´¦ | 3-4å¤© |

---

## ğŸš€ æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆï¼ˆ2025-12-30ï¼‰

> **æ¥æº**: CodeGenie + åä¸ºæ™ºèƒ½åŠ©æ‰‹ + åä¸ºå®˜æ–¹äººå‘˜
> **çŠ¶æ€**: â³ å¾…éªŒè¯å®æ–½
> **çº¦æŸ**: ä¸ä½¿ç”¨ç³»ç»Ÿçº§æƒé™ã€ä¸ä½¿ç”¨ç¬¬ä¸‰æ–¹æƒé™ã€å®Œå…¨éšç§åˆè§„

### ä¸€ã€ä¸“å®¶å›å¤æ±‡æ€»

#### 1. åä¸ºå®˜æ–¹äººå‘˜å›å¤ï¼ˆ2025-12-30ï¼‰

**å…³äº `getImageProperty()` API**ï¼š

> **å®˜æ–¹ç¡®è®¤**ï¼š`imageSource.getImageProperty` è¯»å–ä¸€å¼ æ‰‹æœºæ‹æ‘„çš„ç…§ç‰‡ï¼Œå¯¹åº”çš„FNumberï¼ˆå…‰åœˆï¼‰ã€ExposureTimeï¼ˆå¿«é—¨ï¼‰ã€ISOSpeedRatingséƒ½æ˜¯å¯ä»¥è¯»åˆ°çš„ã€‚

**å…³é”®ä¿¡æ¯**ï¼š
- âœ… `getImageProperty(key)` API **å·²éªŒè¯å¯ç”¨**
- âœ… è¯»å–æˆåŠŸï¼šè¿”å›å­—ç¬¦ä¸²å€¼ï¼ˆå¦‚ "f/1.8"ï¼‰
- âœ… è¯»å–ä¸åˆ°ï¼šè¿”å›ç©ºå­—ç¬¦ä¸² ""ï¼Œ**ä¸æŠ›å¼‚å¸¸**
- âœ… FNumberã€ExposureTimeã€ISOSpeedRatings **éƒ½å¯ä»¥è¯»åˆ°**

**ç»“è®º**ï¼š
- âœ… å½“å‰ä»£ç ä½¿ç”¨çš„ `getImageProperty()` æ–¹æ³•æ˜¯**æ­£ç¡®çš„**
- âœ… CodeGenieå»ºè®®çš„ `getImageProperties()` æ‰¹é‡APIå¯èƒ½**ä¸å­˜åœ¨**æˆ–**ä¸éœ€è¦**
- âœ… ç»§ç»­ä½¿ç”¨å•ä¸ª `getImageProperty()` å³å¯ï¼Œä½†å¯ä»¥è€ƒè™‘å¹¶å‘ä¼˜åŒ–

#### 2. CodeGenieå›å¤ï¼ˆ2025-12-30ï¼‰

**æ ¸å¿ƒæ–¹æ¡ˆ**ï¼š
1. âœ… **å›¾ç‰‡ç¼©ç•¥å›¾åŠ è½½**ï¼šä½¿ç”¨ `createPixelMap({ desiredSize })` ç”Ÿæˆå›ºå®šå°ºå¯¸ç¼©ç•¥å›¾
2. âœ… **ä¸‰çº§ç¼“å­˜æ¶æ„**ï¼šå†…å­˜ç¼“å­˜ï¼ˆLRU 50MBï¼‰+ ç£ç›˜ç¼“å­˜ï¼ˆcacheDirï¼‰+ Bitmapå¤ç”¨
3. âœ… **åˆ—è¡¨æ¸²æŸ“ä¼˜åŒ–**ï¼šLazyForEach + @Reusable + cachedCount(10)
4. âœ… **EXIFè§£æä¼˜åŒ–**ï¼šæ‰¹é‡è¯»å– + TaskPoolå¹¶å‘ + SQLiteç¼“å­˜
5. âœ… **æ‰‹åŠ¿ä¼˜åŒ–**ï¼šGestureGroupåˆå¹¶æ‰‹åŠ¿
6. âœ… **å†…å­˜ç®¡ç†**ï¼šèµ„æºé‡Šæ”¾ + å†…å­˜ç›‘æ§

**æ€§èƒ½æ•°æ®**ï¼š
- å•å›¾åŠ è½½ï¼š150ms â†’ 40msï¼ˆâ†“73%ï¼‰
- å†…å­˜å ç”¨ï¼š80MB â†’ 35MBï¼ˆâ†“56%ï¼‰
- æ»šåŠ¨å¸§ç‡ï¼š45fps â†’ 60fps
- åˆå§‹æ¸²æŸ“ï¼š500ms â†’ 120msï¼ˆâ†“76%ï¼‰
- EXIFå•å¼ ï¼š150ms â†’ 70msï¼ˆâ†“53%ï¼‰
- EXIFæ‰¹é‡ï¼ˆ10å¼ ï¼‰ï¼š1500ms â†’ 300msï¼ˆâ†“80%ï¼‰

### äºŒã€APIéªŒè¯çŠ¶æ€

| API | æŸ¥è¯¢ç»“æœ | çŠ¶æ€ | å®˜æ–¹æ–‡æ¡£é“¾æ¥ |
|-----|---------|------|------------|
| `getImageProperties()` | âœ… **å·²æ‰¾åˆ°** | å­˜åœ¨ | [å®˜æ–¹æ–‡æ¡£](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/arkts-apis-image-imagesource#getimageproperties12) |
| `PixelMap.reuse()` | âœ… **å·²æ‰¾åˆ°** | å­˜åœ¨ | [æ¶æ„æŒ‡å—](https://developer.huawei.com/consumer/cn/doc/architecture-guides/convenient-life-v1_2-ts_32-0000002329113160) |
| `resMonitor` | âŒ **æœªæ‰¾åˆ°** | ä¸å­˜åœ¨ | - |
| `List.onScrollIndex()` | âœ… **å·²æ‰¾åˆ°** | å­˜åœ¨ | [åšå®¢æ–‡ç« ](https://developer.huawei.com/consumer/cn/blog/topic/03169053740291015) |
| `GestureGroup` | âœ… **å·²æ‰¾åˆ°** | å­˜åœ¨ | [APIå‚è€ƒ](https://developer.huawei.com/consumer/cn/doc/harmonyos-references/ts-gesturehandler#gesturegrouphandler) |
| `readPixelsToBuffer()` | âš ï¸ **è®ºå›è®¨è®º** | å¾…ç¡®è®¤ | [è®ºå›è®¨è®º](https://developer.huawei.com/consumer/cn/forum/topic/0204192989263887273) |

### ä¸‰ã€å®æ–½ä¼˜å…ˆçº§

**P0ï¼ˆå·²éªŒè¯ï¼Œå¯ç«‹å³å®æ–½ï¼‰**ï¼š
1. âœ… LazyForEachæ›¿æ¢ForEachï¼ˆå·²éªŒè¯ï¼Œé¡¹ç›®ä¸­å·²æœ‰LazyDataSourceï¼‰
2. âœ… @Reusableç»„ä»¶å¤ç”¨ï¼ˆå·²éªŒè¯ï¼‰
3. âœ… createPixelMapç”Ÿæˆç¼©ç•¥å›¾ï¼ˆå·²éªŒè¯ï¼‰

**P1ï¼ˆå·²éªŒè¯APIï¼Œå¾…å®æ–½ï¼‰**ï¼š
4. âœ… TaskPoolå¹¶å‘è§£æEXIFï¼ˆå·²éªŒè¯APIï¼Œ`getImageProperty()`å·²ç¡®è®¤å¯ç”¨ï¼‰
5. â³ LRUå†…å­˜ç¼“å­˜ï¼ˆéœ€æ‰‹åŠ¨å®ç°ï¼‰
6. â³ ç£ç›˜ç¼“å­˜ï¼ˆå·²éªŒè¯æ–¹æ¡ˆï¼Œéœ€å®ç°ï¼‰

**P2ï¼ˆå·²éªŒè¯APIï¼Œå¾…å®æ–½ï¼‰**ï¼š
7. â³ GestureGroupæ‰‹åŠ¿åˆå¹¶ï¼ˆå·²éªŒè¯APIå­˜åœ¨ï¼‰
8. â³ List.onScrollIndex()é¢„åŠ è½½ï¼ˆå·²éªŒè¯APIå­˜åœ¨ï¼‰

### å››ã€æ³¨æ„äº‹é¡¹

1. **API 20ç‰¹æ®Šé™åˆ¶**
   - PixelMapå¯¹è±¡éœ€æ‰‹åŠ¨è°ƒç”¨release()
   - LazyForEachå¿…é¡»é…åˆDataChangeListenerä½¿ç”¨
   - TaskPoolå•ä»»åŠ¡æœ€å¤§å†…å­˜é™åˆ¶ä¸º16MB

2. **éšç§åˆè§„è¦æ±‚**
   - æ‰€æœ‰File URIéœ€åœ¨24å°æ—¶åä¸»åŠ¨é‡Šæ”¾
   - ç¼“å­˜ç›®å½•æ–‡ä»¶éœ€è®¾ç½®è‡ªåŠ¨æ¸…ç†ç­–ç•¥
   - ä¸å¾—å°†æ²™ç®±æ–‡ä»¶è·¯å¾„æš´éœ²ç»™å…¶ä»–åº”ç”¨

---

## ğŸ“¤ åŸå›¾å­˜å‚¨æ–¹æ¡ˆï¼ˆä¸‰ä¸“å®¶å…±è¯†ï¼Œå¾…å®æ–½ï¼‰

> **éªŒè¯çŠ¶æ€**: â³ å¾…å®æ–½éªŒè¯

### æ ¸å¿ƒç»“è®º

**ä¸‰ä¸“å®¶ä¸€è‡´æ¨è**ï¼šæŒ‰éœ€ä»ç³»ç»Ÿç›¸å†Œè¯»å– + ä¸´æ—¶æ²™ç®±ç¼“å­˜ï¼Œ**ä¸éœ€è¦é»˜è®¤ä¿ç•™åŸå›¾**ã€‚

### æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | å­˜å‚¨å ç”¨ | åŠŸèƒ½å®Œæ•´æ€§ | æ¨è |
|------|----------|------------|------|
| é»˜è®¤ä¿ç•™åŸå›¾ | é«˜ï¼ˆ1GB/100å¼ ï¼‰ | âœ… å…¨éƒ¨ | â­â­ |
| **æŒ‰éœ€è¯»å–+ä¸´æ—¶ç¼“å­˜** | ä½ï¼ˆä»…ä¸´æ—¶ï¼‰ | âœ… å…¨éƒ¨ | â­â­â­â­â­ |
| ä¸ä¿ç•™ä»»ä½•åŸå›¾ | æœ€ä½ | âŒ éƒ¨åˆ† | â­ |

### æŒ‰éœ€è¯»å–æµç¨‹

```
ç”¨æˆ·è§¦å‘ã€Œç§»é™¤EXIFã€
    â†“
é€šè¿‡ photoAccessHelper è¯»å–ç³»ç»Ÿç›¸å†ŒåŸå›¾
    â†“
ä¸´æ—¶å¤åˆ¶åˆ°æ²™ç®±ç¼“å­˜ç›®å½•
    â†“
ç§»é™¤ EXIF å¹¶ä¿å­˜æ–°å›¾
    â†“
åˆ é™¤æ²™ç®±ä¸´æ—¶åŸå›¾
    â†“
æç¤ºç”¨æˆ·æˆåŠŸ
```

---

## â° API 20 å®šæ—¶æé†’åŠŸèƒ½å®ç°æ–¹æ¡ˆï¼ˆä¸‰ä¸“å®¶å›å¤ï¼Œ2026-01-06 æ›´æ–°ï¼‰

> **æ¥æº**: CodeGenie + å°ç±³MIMO + åä¸ºæ™ºèƒ½åŠ©æ‰‹ï¼ˆå°è‰ºAIï¼‰
> **çŠ¶æ€**: â³ **å¾…å®æ–½éªŒè¯**
> **é¡¹ç›®**: PollenForecast
> **é—®é¢˜**: AppGallery å®¡æ ¸åé¦ˆ - å®šæ—¶æé†’åŠŸèƒ½æœªç”Ÿæ•ˆ

**æ³¨æ„**ï¼šæ­¤æ–¹æ¡ˆå·²è¢« **reminderAgentManager** æ–¹æ¡ˆæ›¿ä»£ï¼ˆ2026-01-07éªŒè¯é€šè¿‡ï¼‰

**å½“å‰çŠ¶æ€**ï¼š
- âœ… reminderAgentManager æ–¹æ¡ˆå·²éªŒè¯å¯ç”¨
- â³ WorkScheduler æ–¹æ¡ˆä¿ç•™ä½œä¸ºå¤‡é€‰ï¼ˆå¦‚æœreminderAgentManagerå¤±è´¥ï¼‰

**è¯¦ç»†å†…å®¹**ï¼šè§ `å½“å‰é—®é¢˜.md`ï¼ˆå·²åŒ…å«å®Œæ•´ä¸“å®¶å›å¤ï¼‰

---

--

## ğŸ—ºï¸ åä¸ºMap KitåŒºå¿æ•°æ®æŸ¥è¯¢æ–¹æ¡ˆ âœ… å·²è½¬ç§»

> **æ¥æº**: åä¸ºæ™ºèƒ½åŠ©æ‰‹ + å°è‰º + CodeGenie + è±†åŒ…ï¼ˆå››ä¸“å®¶å…±è¯†ï¼‰  
> **çŠ¶æ€**: âœ… **å·²ç¡®è®¤ä½¿ç”¨æœ¬åœ°JSONæ–¹æ¡ˆ**  
> **å·²è½¬ç§»**: âœ… å·²è½¬ç§»è‡³ `çŸ¥è¯†åº“/ç¬¬ä¸‰æ–¹APIé›†æˆ.md`

**ç»“è®º**: Map Kit ä¸æä¾›åŒºå¿æŸ¥è¯¢ APIï¼Œä½¿ç”¨æœ¬åœ° JSON æ•°æ®ï¼ˆmodood/china-area-dataï¼‰

è¯¦ç»†å†…å®¹è§ `çŸ¥è¯†åº“/ç¬¬ä¸‰æ–¹APIé›†æˆ.md` - [åä¸º Map Kit åŒºå¿æ•°æ®æŸ¥è¯¢æ–¹æ¡ˆ](#åä¸º-map-kit-åŒºå¿æ•°æ®æŸ¥è¯¢æ–¹æ¡ˆ)

---

## ğŸ—ï¸ ä¸‰çº§åŸå¸‚é€‰æ‹©äº¤äº’æ–¹æ¡ˆ(å››ä¸“å®¶å…±è¯†,2026-01-11)

> **æ¥æº**: å°è‰º + CodeGenie + å°ç±³MIMO + è±†åŒ…
> **çŠ¶æ€**: â³ **å¾…å®æ–½éªŒè¯**
> **é¡¹ç›®**: PollenForecast
> **æ ¸å¿ƒéœ€æ±‚**: çœâ†’å¸‚â†’åŒºå¿ä¸‰çº§é€‰æ‹© + åº•éƒ¨å¼¹çª—(70%å±å¹•) + æ”¶è—/ç½®é¡¶

### ä¸€ã€API 17 å…¼å®¹æ€§(å››ä¸“å®¶100%å…±è¯†)

#### 1. æ ¸å¿ƒç»„ä»¶å¯ç”¨æ€§

| ç»„ä»¶ | API 17 | API 20 | å››ä¸“å®¶å…±è¯†ç»“è®º |
|------|--------|--------|----------------|
| `bindSheet` | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ | æœ€ä½éœ€è¦API 19(HarmonyOS 5.1.0) |
| `swipeAction` | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ | æœ€ä½éœ€è¦API 19 |
| `canIUse`æ£€æµ‹ | âœ… æ”¯æŒ | âœ… æ”¯æŒ | ä¼˜å…ˆä½¿ç”¨èƒ½åŠ›æ£€æµ‹,å…œåº•ç”¨APIç‰ˆæœ¬å·åˆ¤æ–­ |

#### 2. é™çº§æ–¹æ¡ˆ(æ¨èä¼˜å…ˆçº§)

**æ–¹æ¡ˆA: bindContentCover + è‡ªå®šä¹‰å¼¹çª—**(å››ä¸“å®¶ä¼˜å…ˆæ¨è)
**æ–¹æ¡ˆB: é•¿æŒ‰å¼¹å‡ºActionSheet**(swipeActionæ›¿ä»£)
**æ–¹æ¡ˆC: è·³è½¬æ–°é¡µé¢**(å¤‡é€‰)

### äºŒã€æ•°æ®ç»“æ„è®¾è®¡(å››ä¸“å®¶å…±è¯†)
- âœ… åµŒå¥—ç»“æ„åˆç†æ€§(100%ä¸€è‡´)
- âœ… PreferencesæŒä¹…åŒ–å­˜å‚¨æ–¹æ¡ˆ(ä¼˜å…ˆæ¨è)

### ä¸‰ã€æ€§èƒ½ä¼˜åŒ–: LazyForEach + asyncRender

### å››ã€åŒºå¿æ•°æ®æ¥æº: é«˜å¾·API > å¼€æºJSON > å’Œé£API

### äº”ã€ç°åº¦ç­–ç•¥: åˆ†çº§é€‚é…,æ— æ„ŸçŸ¥é™çº§

### å…­ã€ä¸“å®¶å…±è¯†åº¦å¯¹æ¯”
- bindSheet API 17å¯ç”¨æ€§: 100%å…±è¯†(ä¸æ”¯æŒ)
- é™çº§æ–¹æ¡ˆ: 100%å…±è¯†(bindContentCover)
- æ•°æ®ç»“æ„: 75%å…±è¯†(åµŒå¥—)
- æŒä¹…åŒ–æ–¹æ¡ˆ: 75%å…±è¯†(Preferences)

**è¯¦ç»†å†…å®¹è§**: `å½“å‰é—®é¢˜.md`(å·²åŒ…å«å››ä¸“å®¶å®Œæ•´å›å¤)

---

## ğŸ¨ ä¸‰çº§èœå•ç»Ÿä¸€è®¾è®¡æ–¹æ¡ˆå†³ç­–(å››ä¸“å®¶å›å¤,2026-01-12)

> **æ¥æº**: å°ç±³MIMO + å°è‰º + CodeGenie + è±†åŒ…
> **çŠ¶æ€**: â³ **è®¾è®¡å†³ç­–ä¸­ï¼Œå¾…ç”¨æˆ·æœ€ç»ˆç¡®è®¤**
> **é¡¹ç›®**: PollenForecast
> **æ ¸å¿ƒé—®é¢˜**: æ–¹æ¡ˆAï¼ˆæ··åˆï¼šäºŒçº§æ‰‹åŠ¿+ä¸‰çº§å¼¹çª—ï¼‰vs æ–¹æ¡ˆBï¼ˆç»Ÿä¸€ï¼šæ‰€æœ‰æ“ä½œåœ¨ä¸‰çº§èœå•ï¼‰

### ä¸€ã€ä¸“å®¶è§‚ç‚¹åˆ†æ­§(50% vs 50%)

#### æ–¹æ¡ˆAé˜µè¥ï¼šæ¨èæ··åˆè®¾è®¡ï¼ˆäºŒçº§ä¿ç•™æ‰‹åŠ¿ï¼‰

**æ”¯æŒä¸“å®¶**: å°ç±³MIMOã€CodeGenie

**æ ¸å¿ƒç†ç”±**:
1. âœ… **ç”¨æˆ·ä½“éªŒæœ€ä¼˜** - æ”¶è—åŸå¸‚æ— éœ€å¤šä¸€æ¬¡ç‚¹å‡»
2. âœ… **ç¬¦åˆé¸¿è’™è§„èŒƒ** - ä»»ä½•å¯æ“ä½œåˆ—è¡¨é¡¹éƒ½åº”æ”¯æŒæ‰‹åŠ¿
3. âœ… **æ“ä½œè·¯å¾„æœ€çŸ­** - ä¸€æ­¥æ“ä½œå®Œæˆæ”¶è—ï¼ˆäºŒçº§æ‰‹åŠ¿ï¼‰

**å°ç±³MIMOè¯¦ç»†å»ºè®®**:
```typescript
// æ··åˆæ–¹æ¡ˆå®ç°
@Builder
CityItemComponent(city: CityItem) {
  Stack({ alignContent: Alignment.End }) {
    // èƒŒæ™¯å±‚ï¼šä»…æ— åŒºå¿åŸå¸‚æ˜¾ç¤º
    if (!this.hasDistricts(city.name)) {
      Row() {
        Button(city.isFavorite ? 'å–æ¶ˆæ”¶è—' : 'æ”¶è—')...
        if (city.isFavorite && !city.isTop) {
          Button('ç½®é¡¶')...
        }
      }
    }
    
    // ä¸»å†…å®¹å±‚
    Row() {
      // å›¾æ ‡ï¼šæœ‰åŒºå¿æ˜¾ç¤ºå³ç®­å¤´ï¼Œæ— åŒºå¿æ˜¾ç¤ºçŠ¶æ€å›¾æ ‡
      if (this.hasDistricts(city.name)) {
        Image($r('app.media.icon_chevron_right'))  // ç›®å½•
      } else {
        this.StatusIcon(city)  // çŠ¶æ€ï¼ˆç½®é¡¶/æ”¶è—/æ™®é€šï¼‰
      }
      Text(city.name)...
    }
    
    // æ‰‹åŠ¿ï¼šä»…æ— åŒºå¿åŸå¸‚æ”¯æŒ
    if (!this.hasDistricts(city.name)) {
      .gesture(PanGesture()...)  // æ‰‹åŠ¿
    }
  }
  .onClick(() => {
    if (this.hasDistricts(city.name)) {
      this.showDistrictDialog(city)  // æœ‰åŒºå¿ï¼šå¼¹çª—
    } else {
      this.selectCityOrDistrict(city.name, null)  // æ— åŒºå¿ï¼šç›´æ¥é€‰ä¸­
    }
  })
}
```

**æ–¹æ¡ˆå¯¹æ¯”è¡¨ï¼ˆå°ç±³MIMOæä¾›ï¼‰**:
| ç»´åº¦ | æ–¹æ¡ˆAï¼ˆæ··åˆï¼‰ | æ–¹æ¡ˆBï¼ˆç»Ÿä¸€ï¼‰ |
|------|--------------|-------------|
| **ä»£ç å¤æ‚åº¦** | 150è¡Œï¼Œä¸­ç­‰ | 88è¡Œï¼Œä½ |
| **ç”¨æˆ·ä½“éªŒ** | â­â­â­â­â­ æœ€ä¼˜ | â­â­â­ å¤šä¸€æ¬¡ç‚¹å‡» |
| **ç»´æŠ¤æ€§** | â­â­â­â­ å¥½ | â­â­â­â­â­ æœ€ä¼˜ |
| **æ€§èƒ½** | â­â­â­â­ å¥½ | â­â­â­â­â­ æœ€ä¼˜ |
| **æ‰©å±•æ€§** | â­â­â­â­ å¥½ | â­â­â­â­â­ å¥½ |
| **ç¬¦åˆè§„èŒƒ** | âœ… æ˜¯ | âŒ å¦ï¼ˆä¸¢å¤±æ‰‹åŠ¿ï¼‰ |

**CodeGenieå»ºè®®**:
```typescript
// æ¡ä»¶æ‰‹åŠ¿é€»è¾‘
.gesture(hasDistricts ? null : PanGesture(...))
.onClick(() => {
  if (hasDistricts) showDistrictDialog()
  else handleDirectSelect()
})
```

---

#### æ–¹æ¡ˆBé˜µè¥ï¼šæ¨èç»Ÿä¸€ä¸‰çº§èœå•è®¾è®¡

**æ”¯æŒä¸“å®¶**: å°è‰ºã€è±†åŒ…

**æ ¸å¿ƒç†ç”±**:
1. âœ… **äº¤äº’ä¸€è‡´æ€§å¼º** - æ‰€æœ‰åŸå¸‚ç»Ÿä¸€ä¸º"ç‚¹å‡»â†’å¼¹çª—â†’æ‰‹åŠ¿"æµç¨‹
2. âœ… **ä»£ç ç®€æ´æ€§é«˜** - 88è¡Œä»£ç ï¼Œå‡å°‘72%
3. âœ… **æ— å¼‚æ­¥ä¾èµ–** - ä¸ä¾èµ–`hasDistricts`æ•°æ®åŠ è½½æ—¶æœº
4. âœ… **æ‰©å±•æ€§æ›´å¥½** - æ”¯æŒç¬¬å››çº§èœå•ï¼ˆè¡—é“/ä¹¡é•‡ï¼‰

**å°è‰ºæ ¸å¿ƒè®ºæ®**:
> æ‚¨çš„ç»Ÿä¸€è®¾è®¡æ–¹æ¡ˆ**ä»äº§å“è®¾è®¡è§’åº¦æ˜¯åˆç†çš„**ï¼Œå®ƒï¼š
> - âœ… ç¬¦åˆé¸¿è’™è®¾è®¡è§„èŒƒçš„ä¸€è‡´æ€§è¦æ±‚
> - âœ… æä¾›æ›´æ¸…æ™°çš„ç”¨æˆ·ä½“éªŒ
> - âœ… å¤§å¹…æå‡ä»£ç å¯ç»´æŠ¤æ€§  
> - âœ… å…·å¤‡æ›´å¥½çš„æ‰©å±•æ€§
>
> è™½ç„¶ç‰ºç‰²äº†"äºŒçº§èœå•ç›´æ¥æ‰‹åŠ¿"çš„å¿«æ·æ€§ï¼Œä½†è·å¾—äº†æ•´ä½“ä½“éªŒçš„ä¸€è‡´æ€§å’Œå¯ç»´æŠ¤æ€§çš„æ˜¾è‘—æå‡ã€‚

**è±†åŒ…è¯¦ç»†åˆ†æï¼ˆæœ€å…¨é¢ï¼‰**:

**1. é¸¿è’™UIè®¾è®¡è§„èŒƒç¬¦åˆæ€§**:
| è¯„ä¼°ç»´åº¦ | æ–¹æ¡ˆAï¼ˆæ··åˆï¼‰ | æ–¹æ¡ˆBï¼ˆç»Ÿä¸€ï¼‰ |
|---------|--------------|-------------|
| ä¸€è‡´æ€§åŸåˆ™ | ä½ï¼ˆç”¨æˆ·éœ€è®°å¿†ä¸åŒæ“ä½œé€»è¾‘ï¼‰ | é«˜ï¼ˆç»Ÿä¸€äº¤äº’è·¯å¾„ï¼‰ |
| å¯é¢„æµ‹æ€§åŸåˆ™ | ä¸­ï¼ˆä¾èµ–å¼‚æ­¥æ•°æ®ï¼Œå¯èƒ½é”™è¯¯ï¼‰ | é«˜ï¼ˆäº¤äº’å›ºå®šï¼Œæ— é¢„æœŸåå·®ï¼‰ |
| æ“ä½œæˆæœ¬ | ä½ï¼ˆä¸€æ­¥æ”¶è—ï¼‰ | ä¸­ï¼ˆå¤šä¸€æ¬¡ç‚¹å‡»ï¼Œå¯ä¼˜åŒ–ï¼‰ |
| **ç»“è®º** | â­â­â­ | â­â­â­â­â­ |

**2. å¤šä¸€æ¬¡ç‚¹å‡»çš„å¯æ¥å—æ€§**ï¼ˆè±†åŒ…æ ¸å¿ƒè®ºç‚¹ï¼‰:
- åŸå¸‚é€‰æ‹©å¹¶é**é«˜é¢‘æ“ä½œ**ï¼ˆå¤§æ¦‚ç‡é¦–æ¬¡ä½¿ç”¨æˆ–åˆ‡æ¢åŸå¸‚ï¼‰
- è½»å¾®æ“ä½œæˆæœ¬å¯¹æ•´ä½“ç”¨æˆ·ä½“éªŒå½±å“æå°
- å¯é€šè¿‡ä¼˜åŒ–å¤§å¹…é™ä½æ„ŸçŸ¥ï¼ˆè§ä¼˜åŒ–æ–¹æ¡ˆï¼‰

**3. æ–¹æ¡ˆBä¼˜åŒ–æ–¹æ¡ˆ**ï¼ˆè±†åŒ…æä¾›ï¼Œé™ä½æ“ä½œæˆæœ¬ï¼‰:

```typescript
// ä¼˜åŒ–1ï¼šç¼©çŸ­å¼¹çª—åŠ¨ç”»ï¼Œé™ä½ç”¨æˆ·æ„ŸçŸ¥
.bindSheet(this.showDistrictDialog, this.DistrictDialog(), {
  height: this.selectedCityForDistrict.districts?.length > 0 ? '70%' : '30%',
  dragBar: true,
  animation: { duration: 200, curve: Curve.EaseOut }  // 200msç§’å¼€
})

// ä¼˜åŒ–2ï¼šå¸¸ç”¨åŸå¸‚ç½®é¡¶ï¼Œè·³è¿‡å¼¹çª—ç›´æ¥é€‰æ‹©
List() {
  // ç½®é¡¶åŸå¸‚ï¼šç›´æ¥ç‚¹å‡»é€‰ä¸­ï¼Œæ— éœ€å¼¹çª—
  ForEach(this.topCities, (city) => {
    ListItem() {
      Row() { ... }
        .onClick(() => this.selectCityOrDistrict(city.name, null))
    }
  })
  // æ™®é€šåŸå¸‚ï¼šç‚¹å‡»è¿›å…¥å¼¹çª—
  ForEach(this.normalCities, (city) => {
    ListItem() { this.CityItemComponent(city) }
  })
}

// ä¼˜åŒ–3ï¼šæ— åŒºå¿åŸå¸‚è‡ªåŠ¨é€‰ä¸­ï¼Œå‡å°‘æ“ä½œæ­¥éª¤
selectCity(cityName: string): void {
  const cityData = getCityWithDistricts(this.allCitiesData, cityName)
  if (cityData) {
    this.selectedCityForDistrict = cityData
    this.showDistrictDialog = true
    
    // æ— åŒºå¿åŸå¸‚è‡ªåŠ¨é€‰ä¸­
    if (!cityData.districts || cityData.districts.length === 0) {
      setTimeout(() => {
        this.selectCityOrDistrict(cityData.name, null)
        this.showDistrictDialog = false
        vibrator.vibrate({ type: VibratorType.SHORT_VIBRATION })  // éœ‡åŠ¨åé¦ˆ
      }, 200)
    }
  }
}
```

**4. è¾¹ç•Œæƒ…å†µä¼˜åŒ–**ï¼ˆè±†åŒ…æä¾›ï¼‰:
```typescript
// æ— åŒºå¿åŸå¸‚ä¼˜åŒ–
// 1. è‡ªé€‚åº”å¼¹çª—é«˜åº¦
const popupHeight = this.selectedCityForDistrict.districts?.length > 0 ? '70%' : '30%'

// 2. éšè—"æˆ–é€‰æ‹©å…·ä½“åŒºå¿"æç¤º
if (this.selectedCityForDistrict.districts?.length > 0) {
  ListItem() { Text('æˆ–é€‰æ‹©å…·ä½“åŒºå¿') }
}

// 3. è§†è§‰æå‰æç¤º
if (!city.hasDistricts) {
  Text('æ— å…·ä½“åŒºå¿').fontSize(10).fontColor($r('app.color.text_secondary'))
}
```

---

### äºŒã€å…³é”®æŠ€æœ¯å¯¹æ¯”

| æŠ€æœ¯ç»´åº¦ | æ–¹æ¡ˆAï¼ˆæ··åˆï¼‰ | æ–¹æ¡ˆBï¼ˆç»Ÿä¸€ï¼‰ |
|---------|--------------|-------------|
| **ä»£ç å¤æ‚åº¦** | 150è¡Œï¼ˆä¸­ç­‰ï¼‰ | 88è¡Œï¼ˆç®€æ´ï¼‰ |
| **å¼‚æ­¥ä¾èµ–** | âŒ ä¾èµ–`hasDistricts`æ•°æ® | âœ… æ— ä¾èµ– |
| **ç»„ä»¶æ¸²æŸ“** | æ¡ä»¶æ¸²æŸ“ï¼ˆå¤æ‚ï¼‰ | ç»Ÿä¸€æ¸²æŸ“ï¼ˆç®€å•ï¼‰ |
| **æ‰‹åŠ¿å†²çª** | âš ï¸ åˆ—è¡¨æ»šåŠ¨ä¸æ‰‹åŠ¿å†²çª | âœ… æ‰‹åŠ¿é›†ä¸­åœ¨å¼¹çª—å†… |
| **æ‰©å±•æ€§** | âš ï¸ æ–°å¢ç¬¬å››çº§éœ€æ”¹äºŒçº§é€»è¾‘ | âœ… ä»…éœ€æ‰©å±•å¼¹çª—ç»„ä»¶ |
| **ç«æ€é£é™©** | âŒ å­˜åœ¨æ•°æ®åŠ è½½æ—¶æœºé—®é¢˜ | âœ… æ— ç«æ€é—®é¢˜ |

---

### ä¸‰ã€ç”¨æˆ·ä½“éªŒåœºæ™¯å¯¹æ¯”

**åœºæ™¯1ï¼šæ”¶è—"å¹¿å·å¸‚"**

| æ–¹æ¡ˆ | æ“ä½œæ­¥éª¤ | æ€»è®¡ |
|------|---------|------|
| **æ–¹æ¡ˆA** | 1. å±•å¼€"å¹¿ä¸œ"<br>2. å·¦æ»‘"å¹¿å·å¸‚"â†’ç‚¹å‡»"æ”¶è—" | âœ… 1æ­¥ |
| **æ–¹æ¡ˆB** | 1. å±•å¼€"å¹¿ä¸œ"<br>2. ç‚¹å‡»"å¹¿å·å¸‚"â†’æ‰“å¼€å¼¹çª—<br>3. å·¦æ»‘"æ•´ä¸ªå¹¿å·å¸‚"â†’ç‚¹å‡»"æ”¶è—" | âŒ 2æ­¥ |
| **æ–¹æ¡ˆB+ä¼˜åŒ–** | 1. å±•å¼€"å¹¿ä¸œ"<br>2. ç‚¹å‡»"å¹¿å·å¸‚"ï¼ˆè‡ªåŠ¨æ”¶è—+éœ‡åŠ¨åé¦ˆï¼‰ | âœ… 1æ­¥ |

**åœºæ™¯2ï¼šé€‰æ‹©"å¤©æ²³åŒº"**

| æ–¹æ¡ˆ | æ“ä½œæ­¥éª¤ | æ€»è®¡ |
|------|---------|------|
| **æ–¹æ¡ˆA** | 1. å±•å¼€"å¹¿ä¸œ"<br>2. ç‚¹å‡»"å¹¿å·å¸‚"â†’æ‰“å¼€å¼¹çª—<br>3. ç‚¹å‡»"å¤©æ²³åŒº" | âœ… 2æ­¥ |
| **æ–¹æ¡ˆB** | 1. å±•å¼€"å¹¿ä¸œ"<br>2. ç‚¹å‡»"å¹¿å·å¸‚"â†’æ‰“å¼€å¼¹çª—<br>3. ç‚¹å‡»"å¤©æ²³åŒº" | âœ… 2æ­¥ |

**ç»“è®º**: æ–¹æ¡ˆBé€šè¿‡ä¼˜åŒ–åï¼Œæ ¸å¿ƒåœºæ™¯æ“ä½œæ­¥éª¤ä¸æ–¹æ¡ˆAç›¸å½“ã€‚

---

### å››ã€éšè—é£é™©å¯¹æ¯”

#### æ–¹æ¡ˆAï¼ˆæ··åˆï¼‰çš„é£é™©ï¼ˆè±†åŒ…æŒ‡å‡ºï¼‰:
1. âš ï¸ **å¼‚æ­¥ç«æ€é—®é¢˜**: `hasDistricts()`åœ¨æ•°æ®æœªåŠ è½½å®Œæˆæ—¶å¯èƒ½è¿”å›é”™è¯¯
2. âš ï¸ **æ‰‹åŠ¿å†²çª**: åˆ—è¡¨æ»šåŠ¨ä¸é¡¹å†…æ‰‹åŠ¿å¯èƒ½å†²çª
3. âš ï¸ **è§†è§‰å¤æ‚åº¦**: åŒä¸€åˆ—è¡¨åŒ…å«ä¸¤ç§ä¸åŒUIæ ·å¼ï¼Œç”¨æˆ·å›°æƒ‘
4. âš ï¸ **æ‰©å±•æ€§å·®**: æ–°å¢ç¬¬å››çº§éœ€è¦é‡æ„æ•´ä¸ªåˆ¤æ–­ä½“ç³»

#### æ–¹æ¡ˆBï¼ˆç»Ÿä¸€ï¼‰çš„é£é™©ï¼ˆå°ç±³MIMOæŒ‡å‡ºï¼‰:
1. âš ï¸ **æ‰‹åŠ¿å†²çªé£é™©**: ä¸‰çº§èœå•å†…æ‰‹åŠ¿ä¸å¼¹çª—æ‹–æ‹½å¯èƒ½å†²çª
   - **è§„é¿**: è®¾ç½®`PanGesture().direction(PanDirection.Horizontal)`
2. âš ï¸ **æ€§èƒ½é—®é¢˜**: æ¯æ¬¡ç‚¹å‡»éƒ½å¼¹çª—æ¸²æŸ“
   - **è§„é¿**: ä½¿ç”¨`LazyForEach`+ç¼“å­˜
3. âš ï¸ **ç”¨æˆ·å¿ƒæ™ºæ¨¡å‹**: å¿…é¡»ç‚¹è¿›å»æ‰èƒ½å·¦æ»‘ï¼Œè¿èƒŒ"å¿«é€Ÿæ“ä½œ"åˆè¡·
   - **è§„é¿**: é€šè¿‡ä¼˜åŒ–3ï¼ˆè‡ªåŠ¨é€‰ä¸­+éœ‡åŠ¨åé¦ˆï¼‰å¼¥è¡¥

---

### äº”ã€ä¸“å®¶å…±è¯†åº¦

| é—®é¢˜ | å°ç±³MIMO | å°è‰º | CodeGenie | è±†åŒ… | å…±è¯†åº¦ |
|------|---------|------|-----------|------|--------|
| **æ¨èæ–¹æ¡ˆ** | Aï¼ˆæ··åˆï¼‰ | Bï¼ˆç»Ÿä¸€ï¼‰ | Aï¼ˆæ··åˆï¼‰ | Bï¼ˆç»Ÿä¸€ï¼‰ | 50% |
| **ä»£ç ç®€æ´æ€§** | Bæ›´ä¼˜ | Bæ›´ä¼˜ | Bæ›´ä¼˜ | Bæ›´ä¼˜ | 100% |
| **ç”¨æˆ·ä½“éªŒ** | Aæ›´ä¼˜ | Bæ›´ä¼˜ | Aæ›´ä¼˜ | Bæ›´ä¼˜ | 50% |
| **ç¬¦åˆé¸¿è’™è§„èŒƒ** | Aæ›´ç¬¦åˆ | Bæ›´ç¬¦åˆ | æœªæåŠ | Bæ›´ç¬¦åˆ | 67%æ”¯æŒB |
| **æ‰©å±•æ€§** | Bæ›´ä¼˜ | Bæ›´ä¼˜ | Bæ›´ä¼˜ | Bæ›´ä¼˜ | 100% |
| **å¤šä¸€æ¬¡ç‚¹å‡»å¯æ¥å—** | âŒ ä¸å¯æ¥å— | âœ… å¯æ¥å— | âŒ ä¸å¯æ¥å— | âœ… å¯æ¥å— | 50% |

---

### å…­ã€å†³ç­–å»ºè®®

#### æ¨èæ–¹æ¡ˆï¼š**æ–¹æ¡ˆBï¼ˆç»Ÿä¸€è®¾è®¡ï¼‰+ ä¼˜åŒ–æªæ–½**

**ç†ç”±**:
1. âœ… **å·¥ç¨‹åŒ–ä¼˜åŠ¿æ˜¾è‘—**ï¼ˆ100%ä¸“å®¶å…±è¯†ï¼‰- ä»£ç å‡å°‘72%ï¼Œæ— å¼‚æ­¥ä¾èµ–
2. âœ… **æ‰©å±•æ€§æ›´å¥½**ï¼ˆ100%ä¸“å®¶å…±è¯†ï¼‰- æ”¯æŒç¬¬å››çº§èœå•
3. âœ… **å¤šä¸€æ¬¡ç‚¹å‡»å¯é€šè¿‡ä¼˜åŒ–å¼¥è¡¥**ï¼ˆè±†åŒ…æä¾›3ä¸ªä¼˜åŒ–æ–¹æ¡ˆï¼‰
4. âœ… **æ›´ç¬¦åˆé¸¿è’™ä¸€è‡´æ€§åŸåˆ™**ï¼ˆ67%ä¸“å®¶æ”¯æŒï¼‰

**å®æ–½æ­¥éª¤**ï¼ˆè±†åŒ…æä¾›çš„ä¼˜å…ˆçº§ï¼‰:
1. **ç¬¬ä¸€ä¼˜å…ˆçº§**: æ— åŒºå¿åŸå¸‚è‡ªåŠ¨é€‰ä¸­+å¼¹çª—é«˜åº¦è‡ªé€‚åº”
2. **ç¬¬äºŒä¼˜å…ˆçº§**: æ‰‹åŠ¿æ»‘åŠ¨æ–¹å‘é™åˆ¶ï¼Œé¿å…ä¸å¼¹çª—æ‹–æ‹½å†²çª
3. **ç¬¬ä¸‰ä¼˜å…ˆçº§**: å¸¸ç”¨åŸå¸‚ç½®é¡¶ï¼Œè·³è¿‡å¼¹çª—ç›´æ¥é€‰æ‹©
4. **ç¬¬å››ä¼˜å…ˆçº§**: ä¼˜åŒ–å¼¹çª—åŠ¨ç”»ï¼ˆ200msç§’å¼€ï¼‰

**å…³é”®ä»£ç **ï¼ˆæ•´åˆå››ä¸“å®¶å»ºè®®ï¼‰:
```typescript
// ç®€åŒ–åçš„CityItemComponentï¼ˆæ–¹æ¡ˆBï¼‰
@Builder
CityItemComponent(city: CityItem) {
  Row() {
    Image($r('app.media.icon_chevron_right')).width(12)
    Column() { Text(city.name) }
    Blank()
    Column() { Text(`${city.distance}å…¬é‡Œ`) }
    Image($r('app.media.icon_chevron_right')).width(16)
  }
  .onClick(() => this.selectCity(city.name))
}

// ç»Ÿä¸€é€»è¾‘çš„selectCityï¼ˆæ–¹æ¡ˆB+ä¼˜åŒ–ï¼‰
selectCity(cityName: string): void {
  const cityData = getCityWithDistricts(this.allCitiesData, cityName)
  
  if (cityData) {
    this.selectedCityForDistrict = cityData
    this.showDistrictDialog = true
    
    // ä¼˜åŒ–ï¼šæ— åŒºå¿åŸå¸‚è‡ªåŠ¨é€‰ä¸­
    if (!cityData.districts || cityData.districts.length === 0) {
      setTimeout(() => {
        this.selectCityOrDistrict(cityData.name, null)
        this.showDistrictDialog = false
        vibrator.vibrate({ type: VibratorType.SHORT_VIBRATION })
      }, 200)
    }
  }
}
```

---

### ä¸ƒã€éªŒè¯è¦ç‚¹

#### å®æ–½åéœ€éªŒè¯:
1. â³ æ— åŒºå¿åŸå¸‚è‡ªåŠ¨é€‰ä¸­æ˜¯å¦æµç•…ï¼ˆ200mså»¶è¿Ÿæ˜¯å¦åˆé€‚ï¼‰
2. â³ å¼¹çª—åŠ¨ç”»æ˜¯å¦è¶³å¤Ÿå¿«ï¼ˆ200ms vs 300msï¼‰
3. â³ æ‰‹åŠ¿ä¸å¼¹çª—æ‹–æ‹½æ˜¯å¦å†²çª
4. â³ ç”¨æˆ·å¯¹"å¤šä¸€æ¬¡ç‚¹å‡»"çš„å®é™…æ„ŸçŸ¥ï¼ˆéœ€ç”¨æˆ·åé¦ˆï¼‰
5. â³ å¸¸ç”¨åŸå¸‚ç½®é¡¶åŠŸèƒ½æ˜¯å¦æœ‰æ•ˆé™ä½æ“ä½œæˆæœ¬

---

## ğŸ“‹ å¾…éªŒè¯æ–¹æ¡ˆæ¸…å•

### P0(ç´§æ€¥ä¿®å¤)â­ å½“å‰ä¼˜å…ˆ
- [x] **å®šæ—¶æé†’åŠŸèƒ½ä¿®å¤**ï¼ˆPollenForecastï¼‰ï¼š
  - âœ… `reminderAgentManager` ä» `@kit.BackgroundTasksKit` å¯¼å…¥ï¼ˆå·²éªŒè¯ï¼‰
  - âœ… `publishReminder` / `cancelReminder` / `getValidReminders` å¯ç”¨
  - âŒ `cancelAllReminders` æ˜¯ç³»ç»ŸAPIï¼Œæ”¹ç”¨é€ä¸ªå–æ¶ˆ
  - âœ… **å·²ä¿®å¤**ï¼šä¿®å¤åæé†’å·²æ­£å¸¸è§¦å‘ï¼ˆ2026-01-07éªŒè¯ï¼‰
- [x] **çœä»½åˆ†ç»„ç‚¹å‡»å±•å¼€é—®é¢˜**ï¼ˆPollenForecastï¼‰ï¼š
  - âœ… é—®é¢˜æ ¹å› å·²ç¡®è®¤ï¼šonClick ç»‘å®šä½ç½®é”™è¯¯
  - âœ… ä¸‰ä¸“å®¶å…±è¯†ï¼šListItem ä¼šæ‹¦æˆªå­ç»„ä»¶äº‹ä»¶
  - âœ… è§£å†³æ–¹æ¡ˆï¼šå°† onClick ä» Row ç§»åˆ° ListItem
  - âœ… **å·²ä¿®å¤**ï¼šåŠŸèƒ½å·²æ­£å¸¸ï¼ˆ2026-01-10éªŒè¯ï¼‰
- [x] **ä¸‰çº§èœå•å®ç°é—®é¢˜ä¿®å¤**ï¼ˆPollenForecastï¼‰ï¼š
  - âœ… å¼‚æ­¥åŠ è½½æ—¶æœºé—®é¢˜å·²è§£å†³
  - âœ… é˜²å¾¡æ€§ç¼–ç¨‹å·²å®æ–½
  - âœ… æ•°æ®åŠ è½½çŠ¶æ€æ§åˆ¶å·²æ·»åŠ 
  - âœ… **å·²ä¿®å¤**ï¼šä¸‰çº§èœå•åŠŸèƒ½å®Œå…¨ä¿®å¤ï¼ˆ2026-01-13éªŒè¯ï¼‰
- [x] **Map KitåŒºå¿æ•°æ®æŸ¥è¯¢æ–¹æ¡ˆ**ï¼ˆPollenForecastï¼‰ï¼š
  - âœ… å·²ç¡®è®¤ä½¿ç”¨æœ¬åœ°JSONæ•°æ®ï¼ˆmodood/china-area-dataï¼‰
  - âœ… JSONæ•°æ®å·²é›†æˆåˆ°é¡¹ç›®
  - âœ… åŒºå¿åˆ—è¡¨æ­£å¸¸å¼¹å‡º
  - âœ… **å·²ç¡®è®¤**ï¼šæ–¹æ¡ˆå·²å®æ–½ï¼ˆ2026-01-13éªŒè¯ï¼‰
- [ ] **ä¸‰çº§èœå•ç»Ÿä¸€è®¾è®¡æ–¹æ¡ˆå†³ç­–**ï¼ˆPollenForecastï¼‰ï¼š
  - âœ… å››ä¸“å®¶å›å¤å·²æ•´ç†ï¼ˆå°ç±³MIMOã€å°è‰ºã€CodeGenieã€è±†åŒ…ï¼‰
  - ğŸ“Š ä¸“å®¶è§‚ç‚¹ï¼š50%æ¨èæ··åˆæ–¹æ¡ˆï¼Œ50%æ¨èç»Ÿä¸€æ–¹æ¡ˆ
  - ğŸ’¡ æ¨èï¼šæ–¹æ¡ˆBï¼ˆç»Ÿä¸€è®¾è®¡ï¼‰+ ä¼˜åŒ–æªæ–½ï¼ˆè±†åŒ…æä¾›ï¼‰
  - â³ **å¾…ç”¨æˆ·æœ€ç»ˆå†³ç­–**ï¼šé€‰æ‹©æ–¹æ¡ˆAè¿˜æ˜¯æ–¹æ¡ˆBï¼Ÿ
  - â³ **å¾…å®æ–½éªŒè¯**ï¼šä¼˜åŒ–æªæ–½æ•ˆæœï¼ˆè‡ªåŠ¨é€‰ä¸­ã€ç½®é¡¶è·³è¿‡å¼¹çª—ç­‰ï¼‰
  - **åŒºå¿æ•°æ®æ¥æº**: âœ… å·²ç¡®è®¤ä½¿ç”¨æœ¬åœ°JSONæ•°æ®ï¼ˆmodood/china-area-dataï¼‰ (2026-01-11)
  - **å®æ–½æ­¥éª¤**: 
    1. âœ… ä¸‹è½½JSONæ•°æ®æ”¾å…¥rawfileç›®å½•ï¼ˆå·²å®Œæˆï¼‰
    2. âœ… ç¼–å†™JSONè§£æä¸æ•°æ®ç»“æ„è½¬æ¢é€»è¾‘ï¼ˆå·²å®Œæˆï¼‰
    3. âœ… å®ç°ä¸‰çº§é€‰æ‹©UIï¼ˆbindSheet + swipeActionï¼‰ï¼ˆå·²å®Œæˆï¼‰
    4. â³ æ€§èƒ½ä¼˜åŒ–ï¼ˆLazyForEach + åˆ†çº§åŠ è½½ï¼‰
- [ ] **åŒºåŸŸTabèŠ±ç²‰æµ“åº¦æ’åº**ï¼ˆPollenForecastï¼‰ï¼š
  - âœ… æ‰©å±•CityItemæ¥å£ï¼Œæ·»åŠ pollenLevelã€pinyinã€adcodeç­‰å­—æ®µ
  - âœ… å››çº§ä¼˜å…ˆçº§æ’åºï¼šç½®é¡¶ > æ”¶è— > èŠ±ç²‰æµ“åº¦ > è·ç¦»
  - â³ **å¾…éªŒè¯**ï¼šLazyForEach + è™šæ‹Ÿæ»šåŠ¨æ€§èƒ½ä¼˜åŒ–
  - â³ **å¾…éªŒè¯**ï¼šAlphabetIndexerå­—æ¯ç´¢å¼•å®ç°
  - â³ **å¾…éªŒè¯**ï¼šæ‹¼éŸ³æœç´¢åŠŸèƒ½
- [ ] **åŸå­æœåŠ¡å¡ç‰‡APIä¿®å¤**ï¼šFormAbilityæœªè¢«è°ƒç”¨
- [ ] **MapKit äº‹ä»¶ç›‘å¬æ›¿ä»£æ–¹æ¡ˆ**ï¼šéªŒè¯ controller.on() æ˜¯å¦å¯ç”¨

### P0ï¼ˆåŒºåŸŸTabä¼˜åŒ–ä¸“é¡¹ï¼‰
- [ ] **æ•°æ®å±‚æ”¹é€ **ï¼ˆ3äººæ—¥ï¼‰ï¼šæ‰©å±•CityItemæ¥å£ï¼ŒèŠ±ç²‰æ•°æ®ç¼“å­˜æœºåˆ¶
- [ ] **è§†å›¾å±‚æ”¹é€ **ï¼ˆ5äººæ—¥ï¼‰ï¼šåŸå¸‚åˆ†ç»„å±•ç¤ºï¼Œå­—æ¯ç´¢å¼•åŠŸèƒ½ï¼Œå¢å¼ºæœç´¢
- [ ] **æ€§èƒ½ä¼˜åŒ–**ï¼ˆ4äººæ—¥ï¼‰ï¼šè™šæ‹Ÿæ»šåŠ¨ï¼Œæ•°æ®åˆ†æ‰¹åŠ è½½ï¼Œç¼“å­˜ä¼˜åŒ–
- [ ] **åŠŸèƒ½æµ‹è¯•**ï¼ˆ2äººæ—¥ï¼‰ï¼šæ’åºéªŒè¯ï¼Œæ€§èƒ½æµ‹è¯•ï¼Œå…¼å®¹æ€§æµ‹è¯•

### P1ï¼ˆåŠŸèƒ½å®Œå–„ï¼‰
- [ ] **MapKit åæ ‡è½¬æ¢**ï¼šéªŒè¯ animateCamera æ˜¯å¦éœ€è¦ convertCoord
- [ ] **MapKit snippet å±æ€§**ï¼šéªŒè¯æ˜¯å¦åœ¨ API 17 ä¸­æœ‰æ•ˆ
- [ ] **å¯¼å‡ºæˆåŠŸå¼¹çª—é‡æ„**ï¼šSheet â†’ CustomDialog
- [ ] **æŒ‰éœ€è¯»å–åŸå›¾**ï¼šphotoAccessHelper.query()
- [ ] **å…¨å±åŸå›¾é¢„è§ˆ**ï¼šä»ç³»ç»Ÿç›¸å†Œè¯»å–é«˜æ¸…åŸå›¾

### P2ï¼ˆä¼˜åŒ–é˜¶æ®µï¼‰
- [ ] **æ€§èƒ½ä¼˜åŒ–å®æ–½**ï¼šLazyForEach + @Reusable + ç¼©ç•¥å›¾
- [ ] **æŠ€æœ¯å€ºåŠ¡æ¸…ç†**ï¼šTaskPoolå¹¶å‘æ§åˆ¶ã€Nativeå¼‚å¸¸å¤„ç†
- [ ] **å­˜å‚¨ç®¡ç†UI**ï¼šè®¾ç½®é¡µæ¸…ç†å¯¼å‡ºæ–‡ä»¶/ç¼“å­˜
- [ ] **åŸå›¾å­˜å‚¨æ–¹æ¡ˆ**ï¼šæŒ‰éœ€ä»ç³»ç»Ÿç›¸å†Œè¯»å– + ä¸´æ—¶æ²™ç®±ç¼“å­˜

---

## ğŸŒ¼ åŒºåŸŸTabèŠ±ç²‰æµ“åº¦æ’åºæ–¹æ¡ˆï¼ˆå¾…éªŒè¯ï¼Œ2026-01-10ï¼‰

> **æ¥æº**: æ™ºèƒ½åŠ©æ‰‹ + å°è‰ºAI + CodeGenie
> **çŠ¶æ€**: â³ **å¾…å®æ–½éªŒè¯**
> **é¡¹ç›®**: PollenForecast
> **åŠŸèƒ½**: åŒºåŸŸTabæŒ‰èŠ±ç²‰æµ“åº¦æ’åºï¼Œæ”¯æŒ3000+åŸå¸‚å±•ç¤º

### ä¸€ã€æ ¸å¿ƒæ•°æ®ç»“æ„ä¼˜åŒ–

#### 1. æ‰©å±•CityItemæ¥å£
```typescript
interface CityItem {
  name: string;         // åŸå¸‚åç§°
  adcode: string;       // è¡Œæ”¿åŒºåˆ’ä»£ç ï¼ˆå…¼å®¹æ•èˆ’æ•°æ®æºï¼‰
  pinyin: string;       // å…¨æ‹¼ï¼ˆå¦‚"beijing")
  shortPinyin: string;  // é¦–å­—æ¯ï¼ˆå¦‚"bj")
  pollenLevel: number;  // èŠ±ç²‰æµ“åº¦ç­‰çº§ (0-5)
  pollenData?: PollenData; // å®Œæ•´èŠ±ç²‰æ•°æ®
  lastUpdated?: number; // èŠ±ç²‰æ•°æ®æ›´æ–°æ—¶é—´æˆ³
  province?: string;    // æ‰€å±çœä»½ï¼ˆç”¨äºåˆ†ç»„ï¼‰
  distance: number;     // è·ç¦»
  isFavorite: boolean;  // æ˜¯å¦æ”¶è—
  isTop: boolean;       // æ˜¯å¦ç½®é¡¶
}
```

#### 2. æ’åºé€»è¾‘ï¼ˆå››çº§ä¼˜å…ˆçº§ï¼‰
- ä¼˜å…ˆçº§1ï¼šç½®é¡¶åŸå¸‚ (isTop: true)
- ä¼˜å…ˆçº§2ï¼šæ”¶è—åŸå¸‚ (isFavorite: true)
- ä¼˜å…ˆçº§3ï¼šèŠ±ç²‰æµ“åº¦ (ä½åˆ°é«˜æ’åº)
- ä¼˜å…ˆçº§4ï¼šè·ç¦» (å¦‚æœæ— èŠ±ç²‰æ•°æ®)

**å…³é”®å»ºè®®**ï¼š
- èŠ±ç²‰æµ“åº¦ç¼ºå¤±æ—¶ï¼Œå»ºè®®åŠ å…¥**é»˜è®¤å€¼ç­–ç•¥**ï¼ˆä¾‹å¦‚å–å…¨å›½å¹³å‡å€¼ï¼‰
- è·ç¦»è®¡ç®—éœ€æ˜ç¡®æ˜¯å¦æŒç»­ç›‘å¬GPSï¼ˆæ³¨æ„åŠŸè€—ä¼˜åŒ–ï¼‰

### äºŒã€ArkUIç»„ä»¶å®ç°å…³é”®ç‚¹

#### 1. åˆ†ç»„ä¸ç´¢å¼•
- ä½¿ç”¨`AlphabetIndexer`ç»„ä»¶å®ç°å­—æ¯ç´¢å¼•
- éœ€é…åˆ`List`ç»„ä»¶çš„`scroller`å±æ€§è”åŠ¨æ»šåŠ¨ä½ç½®
- åˆ†ç»„å»ºè®®ï¼šä¼˜å…ˆæŒ‰**çœä»½åˆ†ç»„**ï¼Œæ¬¡ä¼˜æŒ‰æ‹¼éŸ³é¦–å­—æ¯ï¼ˆéœ€å¤„ç†å¤šéŸ³å­—ï¼‰

#### 2. æœç´¢åŠŸèƒ½å¢å¼º
- æ‹¼éŸ³æœç´¢ï¼šæ¨èé¢„ç”ŸæˆåŸå¸‚æ‹¼éŸ³æ•°æ®ï¼ˆæœåŠ¡ç«¯æˆ–é¦–æ¬¡åŠ è½½æ—¶è½¬æ¢ï¼‰ï¼Œé¿å…å®æ—¶è®¡ç®—å¼€é”€
- å†å²è®°å½•ï¼šä½¿ç”¨`Preferences`æŒä¹…åŒ–å­˜å‚¨ï¼Œé™åˆ¶æ¡æ•°ï¼ˆå¦‚æœ€è¿‘10æ¡ï¼‰

#### 3. æ‰‹åŠ¿å…¼å®¹æ€§
- `SwipeAction`ç»„ä»¶éœ€åœ¨`List`é¡¹å†…åµŒå¥—ä½¿ç”¨ï¼Œæ³¨æ„æ‰‹åŠ¿å†²çªæ£€æµ‹
- ä¿ç•™ç°æœ‰æ»‘åŠ¨æ“ä½œï¼ˆæ”¶è—/ç½®é¡¶åŠŸèƒ½ï¼‰

### ä¸‰ã€æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

#### 1. å¤§æ•°æ®é‡æ¸²æŸ“
- âœ… `LazyForEach` + è™šæ‹Ÿæ»šåŠ¨ï¼šåº”å¯¹3000+åŸå¸‚æ•°æ®çš„å¿…è¦æ–¹æ¡ˆ
- èŠ±ç²‰æ•°æ®ç¼“å­˜ï¼šå»ºè®®é‡‡ç”¨**ä¸¤çº§ç¼“å­˜**ï¼ˆå†…å­˜ + æœ¬åœ°æ•°æ®åº“ï¼‰ï¼Œå¹¶è®¾ç½®TTLï¼ˆå¦‚30åˆ†é’Ÿï¼‰
- è™šæ‹Ÿæ»šåŠ¨éœ€éªŒè¯å¿«é€Ÿæ»‘åŠ¨æ—¶çš„ç™½å±é—®é¢˜ï¼ˆè°ƒæ•´`cachedCount`å‚æ•°ä¼˜åŒ–ï¼‰

#### 2. æ•°æ®åŠ è½½ç­–ç•¥
- é¦–å±åŠ è½½ï¼šå½“å‰çœä»½+çƒ­é—¨åŸå¸‚ï¼ˆ<100æ¡ï¼‰
- æ»šåŠ¨åŠ è½½ï¼šæŒ‰å­—æ¯åˆ†ç»„åŠ¨æ€åŠ è½½
- èŠ±ç²‰æ•°æ®ï¼šç‹¬ç«‹æ¥å£æŒ‰éœ€åŠ è½½

#### 3. æ¸²æŸ“ä¼˜åŒ–é…ç½®
```typescript
List()
  .cachedCount(10)    // å±å¹•å¤–ç¼“å­˜é¡¹æ•°
  .edgeEffect(EdgeEffect.Spring)
  .chainAnimation(true)
```

### å››ã€é£é™©è§„é¿å»ºè®®

#### 1. æ•°æ®ä¸€è‡´æ€§
- èŠ±ç²‰æ•°æ®æ›´æ–°æ—¶ï¼Œé‡‡ç”¨**å·®å¼‚å¯¹æ¯”æ›´æ–°**ï¼ˆå¦‚`@ohos.data.preferences`ç›‘å¬å˜æ›´ï¼‰ï¼Œé¿å…å…¨é‡åˆ·æ–°

#### 2. å…¼å®¹æ€§ä¿éšœ
- æ–°æ—§æ•°æ®ç»“æ„å…±å­˜æ—¶ï¼Œå»ºè®®ï¼š
```typescript
// æ—§æ•°æ®è¿ç§»é€‚é…
pollenLevel: oldData.pollenLevel || DEFAULT_LEVEL
```

#### 3. èŠ±ç²‰æ•°æ®å»¶è¿Ÿå¤„ç†
- æ–¹æ¡ˆï¼šé»˜è®¤æ˜¾ç¤ºå†å²æ•°æ®+åŠ è½½æŒ‡ç¤ºå™¨
- é™çº§ï¼šæ— æ•°æ®æ—¶è‡ªåŠ¨åˆ‡æ¢è·ç¦»æ’åº

### äº”ã€å®æ–½ä¼˜å…ˆçº§æ¨è

| é˜¶æ®µ | å…³é”®ä»»åŠ¡ | å‘¨æœŸé¢„ä¼° |
|------|----------|----------|
| **æ•°æ®å±‚** | èŠ±ç²‰æœåŠ¡æ”¹é€  + ç¼“å­˜æœºåˆ¶ | 3äººæ—¥ |
| **è§†å›¾å±‚** | åˆ†ç»„åˆ—è¡¨ + æ‹¼éŸ³æœç´¢ | 5äººæ—¥ |
| **æ€§èƒ½å±‚** | è™šæ‹Ÿæ»šåŠ¨ + åˆ†æ‰¹åŠ è½½ | 4äººæ—¥ |

> æ–¹æ¡ˆæ•´ä½“åˆç†ï¼ŒæŠ€æœ¯é€‰å‹ç¬¦åˆHarmonyOSæœ€ä½³å®è·µã€‚é‡ç‚¹å…³æ³¨**å¤§æ•°æ®é‡ä¸‹çš„æ¸²æŸ“æ€§èƒ½**ä¸**èŠ±ç²‰æ•°æ®å®æ—¶æ€§**ï¼Œå»ºè®®ä¼˜å…ˆè½åœ°æ ¸å¿ƒæ’åºåŠŸèƒ½ï¼Œå†è¿­ä»£æ‰©å±•æ¨¡å—ã€‚

---

## ğŸ“‹ å·²éªŒè¯æ–¹æ¡ˆï¼ˆå·²è¿ç§»è‡³çŸ¥è¯†åº“ï¼‰

ä»¥ä¸‹æ–¹æ¡ˆå·²éªŒè¯é€šè¿‡ï¼Œå·²ç§»è‡³çŸ¥è¯†åº“åˆ†ç±»æ–‡ä»¶ï¼Œä¸å†é‡å¤ï¼š
- âœ… **è¿”å›æ‰‹åŠ¿å¤„ç†**ï¼šonBackPressæ–¹æ³• â†’ `çŸ¥è¯†åº“/ArkTSè¯­æ³•.md`
- âœ… **AppStorageç”¨æ³•**ï¼šå…¨å±€å¯¹è±¡æ— éœ€å¯¼å…¥ â†’ `çŸ¥è¯†åº“/ArkTSè¯­æ³•.md`
- âœ… **API ç‰ˆæœ¬æ£€æµ‹**ï¼šdeviceInfo.sdkApiVersion â†’ `çŸ¥è¯†åº“/APIå…¼å®¹æ€§.md`
- âœ… **æ¡ä»¶æ¨¡å—å¯¼å…¥**ï¼šé™æ€å¯¼å…¥+æ¡ä»¶åˆ¤æ–­ â†’ `çŸ¥è¯†åº“/APIå…¼å®¹æ€§.md`
- âœ… **æƒé™å£°æ˜å…¼å®¹**ï¼šAPI 17è‡ªåŠ¨å¿½ç•¥æœªè¯†åˆ«æƒé™ â†’ `çŸ¥è¯†åº“/APIå…¼å®¹æ€§.md`
- âœ… **UI é™çº§ä½“éªŒ**ï¼šToggleç¦ç”¨+äº‹ä»¶å§”æ‰˜ â†’ `çŸ¥è¯†åº“/APIå…¼å®¹æ€§.md`
- âœ… **Sheet + ç³»ç»Ÿåˆ†äº«**ï¼šå·²éªŒè¯é€šè¿‡ â†’ `çŸ¥è¯†åº“/åˆ†äº«å¯¼å‡º.md`
- âœ… **å®šæ—¶æé†’åŠŸèƒ½**ï¼šreminderAgentManager â†’ `çŸ¥è¯†åº“/å®šæ—¶æé†’.md`
- âœ… **çŠ¶æ€æ é…ç½®**ï¼šstatusBarContentColorä¼˜å…ˆçº§ â†’ `çŸ¥è¯†åº“/UIç»„ä»¶.md`
- âœ… **åª’ä½“åº“URIè®¿é—®**ï¼šfileIo.statSyncå¿…é¡»ç”¨fd â†’ `çŸ¥è¯†åº“/UIç»„ä»¶.md`

---

**ğŸ“Œ æç¤º**ï¼šéªŒè¯é€šè¿‡åç«‹å³è¿ç§»åˆ°å¯¹åº”çŸ¥è¯†åº“åˆ†ç±»æ–‡ä»¶ï¼Œä¿æŒæœ¬æ–‡ä»¶ç²¾ç®€ã€‚

---

## ğŸ”§ Listç»„ä»¶ç‚¹å‡»äº‹ä»¶ç»‘å®šè§„èŒƒ âœ… å·²è½¬ç§»

> **æ¥æº**: å°è‰º AI + CodeGenie + å°ç±³MIMOï¼ˆä¸‰ä¸“å®¶å…±è¯†ï¼‰  
> **çŠ¶æ€**: âœ… **å·²éªŒè¯å¹¶ä¿®å¤**ï¼ˆ2026-01-10ï¼‰  
> **å·²è½¬ç§»**: âœ… å·²è½¬ç§»è‡³ `çŸ¥è¯†åº“/ArkTSè¯­æ³•.md`

**æ ¸å¿ƒé—®é¢˜**: ListItem ç»„ä»¶ä¼šæ‹¦æˆªå…¶å†…éƒ¨å­ç»„ä»¶çš„ç‚¹å‡»äº‹ä»¶

**è§£å†³æ–¹æ¡ˆ**: onClick ç»‘å®šåœ¨ ListItem ä¸Šï¼Œè€Œé Row ä¸Š

è¯¦ç»†å†…å®¹è§ `çŸ¥è¯†åº“/ArkTSè¯­æ³•.md` - [Listç»„ä»¶ç‚¹å‡»äº‹ä»¶ç»‘å®šè§„èŒƒ](#listç»„ä»¶ç‚¹å‡»äº‹ä»¶ç»‘å®šè§„èŒƒ)

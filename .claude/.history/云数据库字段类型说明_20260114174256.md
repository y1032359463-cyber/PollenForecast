# äº‘æ•°æ®åº“å­—æ®µç±»å‹è¯´æ˜

> **åˆ›å»ºæ—¶é—´**: 2026-01-14  
> **é—®é¢˜**: åä¸ºäº‘æ•°æ®åº“ä¸æ”¯æŒ Object å’Œ Number ç±»å‹

---

## ğŸ“‹ åä¸ºäº‘æ•°æ®åº“æ”¯æŒçš„æ•°æ®ç±»å‹

æ ¹æ®ç•Œé¢æ˜¾ç¤ºï¼Œåä¸ºäº‘æ•°æ®åº“ (for Object) æ”¯æŒä»¥ä¸‹ç±»å‹ï¼š

- **String** - å­—ç¬¦ä¸²
- **Boolean** - å¸ƒå°”å€¼
- **Byte** - å­—èŠ‚
- **Short** - çŸ­æ•´å‹
- **Integer** - æ•´å‹
- **Long** - é•¿æ•´å‹
- **Float** - å•ç²¾åº¦æµ®ç‚¹æ•°
- **Double** - åŒç²¾åº¦æµ®ç‚¹æ•°
- **ByteArray** - å­—èŠ‚æ•°ç»„
- **Text** - æ–‡æœ¬ï¼ˆé•¿æ–‡æœ¬ï¼‰
- **Date** - æ—¥æœŸ
- **IntAutoIncrement** - è‡ªå¢æ•´å‹
- **LongAutoIncrement** - è‡ªå¢é•¿æ•´å‹

---

## âœ… æ­£ç¡®çš„å­—æ®µç±»å‹è®¾è®¡

### PollenData å¯¹è±¡ç±»å‹

| å­—æ®µå | ç±»å‹ | æ˜¯å¦ä¸»é”® | è¯´æ˜ |
|--------|------|---------|------|
| `adcode` | **String** | âœ… æ˜¯ | åŸå¸‚ç¼–ç ï¼ˆå¦‚ï¼š110000ï¼‰ |
| `recordDate` | **String** | âœ… æ˜¯ | æ—¥æœŸï¼ˆæ ¼å¼ï¼š2026-01-14ï¼‰ |
| `data` | **Text** | âŒ å¦ | èŠ±ç²‰æ•°æ®ï¼ˆJSONå­—ç¬¦ä¸²ï¼‰ |
| `updatedAt` | **Long** | âŒ å¦ | æ›´æ–°æ—¶é—´æˆ³ï¼ˆæ¯«ç§’æ•°ï¼‰ |

---

## ğŸ’¡ ç±»å‹è¯´æ˜

### 1. `data` å­—æ®µ - ä½¿ç”¨ Text ç±»å‹

**åŸå› **:
- åä¸ºäº‘æ•°æ®åº“ä¸æ”¯æŒ `Object` ç±»å‹
- JSON æ•°æ®éœ€è¦å­˜å‚¨ä¸ºå­—ç¬¦ä¸²

**å­˜å‚¨æ–¹å¼**:
```javascript
// å†™å…¥æ—¶ï¼šå°† JSON å¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²
data: JSON.stringify(response.data)

// è¯»å–æ—¶ï¼šå°†å­—ç¬¦ä¸²è§£æä¸º JSON å¯¹è±¡
const jsonData = JSON.parse(result.data);
```

**ç¤ºä¾‹**:
```javascript
// åŸå§‹æ•°æ®
{
  "code": 0,
  "msg": "success",
  "data": { ... }
}

// å­˜å‚¨ä¸º Textï¼ˆJSON å­—ç¬¦ä¸²ï¼‰
"{'code':0,'msg':'success','data':{...}}"
```

---

### 2. `updatedAt` å­—æ®µ - ä½¿ç”¨ Long ç±»å‹

**åŸå› **:
- åä¸ºäº‘æ•°æ®åº“ä¸æ”¯æŒ `Number` ç±»å‹
- æ—¶é—´æˆ³æ˜¯é•¿æ•´å‹ï¼ˆæ¯«ç§’æ•°ï¼‰

**å­˜å‚¨æ–¹å¼**:
```javascript
// å†™å…¥æ—¶ï¼šä½¿ç”¨ Date.now()ï¼ˆè¿”å›æ¯«ç§’æ•°ï¼‰
updatedAt: Date.now()

// è¯»å–æ—¶ï¼šç›´æ¥ä½¿ç”¨ï¼ˆå·²ç»æ˜¯æ•°å­—ï¼‰
const timestamp = result.updatedAt;
```

**ç¤ºä¾‹**:
```javascript
// æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰
updatedAt: 1705234567890
```

---

## ğŸ“ å®Œæ•´çš„å­—æ®µé…ç½®

### åœ¨åä¸ºäº‘æ•°æ®åº“æ§åˆ¶å°é…ç½®

1. **adcode** (String, ä¸»é”®)
   - ç±»å‹ï¼šString
   - ä¸»é”®ï¼šâœ… æ˜¯
   - è¯´æ˜ï¼šåŸå¸‚ç¼–ç 

2. **recordDate** (String, ä¸»é”®)
   - ç±»å‹ï¼šString
   - ä¸»é”®ï¼šâœ… æ˜¯
   - è¯´æ˜ï¼šæ—¥æœŸï¼ˆæ ¼å¼ï¼š2026-01-14ï¼‰

3. **data** (Text)
   - ç±»å‹ï¼šText
   - ä¸»é”®ï¼šâŒ å¦
   - è¯´æ˜ï¼šèŠ±ç²‰æ•°æ®ï¼ˆJSONå­—ç¬¦ä¸²ï¼‰

4. **updatedAt** (Long)
   - ç±»å‹ï¼šLong
   - ä¸»é”®ï¼šâŒ å¦
   - è¯´æ˜ï¼šæ›´æ–°æ—¶é—´æˆ³ï¼ˆæ¯«ç§’æ•°ï¼‰

---

## ğŸ”„ ä»£ç ç¤ºä¾‹

### å†™å…¥æ•°æ®ï¼ˆäº‘å‡½æ•°ï¼‰

```javascript
// å†™å…¥äº‘æ•°æ®åº“
await collection.doc(`${city.adcode}_${day}`).set({
  adcode: city.adcode,                    // String
  recordDate: day,                        // String
  data: JSON.stringify(response.data),    // Textï¼ˆJSONå­—ç¬¦ä¸²ï¼‰
  updatedAt: Date.now()                   // Longï¼ˆæ¯«ç§’æ—¶é—´æˆ³ï¼‰
});
```

### è¯»å–æ•°æ®ï¼ˆå®¢æˆ·ç«¯ï¼‰

```typescript
// æŸ¥è¯¢æ•°æ®
const result = await collection.doc(`${adcode}_${recordDate}`).get();

// è§£æ JSON å­—ç¬¦ä¸²
const pollenData = JSON.parse(result.data.data);

// ä½¿ç”¨æ•°æ®
console.log(pollenData.code);  // 0
console.log(pollenData.msg);   // "success"
```

---

## âœ… æ€»ç»“

### å­—æ®µç±»å‹æ˜ å°„

| éœ€æ±‚ | åä¸ºäº‘æ•°æ®åº“ç±»å‹ | è¯´æ˜ |
|------|----------------|------|
| JSON å¯¹è±¡ | **Text** | å­˜å‚¨ä¸º JSON å­—ç¬¦ä¸² |
| æ—¶é—´æˆ³ | **Long** | æ¯«ç§’æ•° |
| å­—ç¬¦ä¸² | **String** | æ™®é€šå­—ç¬¦ä¸² |
| æ—¥æœŸ | **String** æˆ– **Date** | å»ºè®®ç”¨ Stringï¼ˆæ ¼å¼ï¼š2026-01-14ï¼‰ |

### æ³¨æ„äº‹é¡¹

1. âœ… `data` å­—æ®µä½¿ç”¨ **Text** ç±»å‹ï¼Œå­˜å‚¨ JSON å­—ç¬¦ä¸²
2. âœ… `updatedAt` å­—æ®µä½¿ç”¨ **Long** ç±»å‹ï¼Œå­˜å‚¨æ¯«ç§’æ—¶é—´æˆ³
3. âœ… å†™å…¥æ—¶éœ€è¦ `JSON.stringify()`ï¼Œè¯»å–æ—¶éœ€è¦ `JSON.parse()`

---

**æœ€åæ›´æ–°**: 2026-01-14  
**çŠ¶æ€**: âœ… å­—æ®µç±»å‹å·²ä¿®æ­£

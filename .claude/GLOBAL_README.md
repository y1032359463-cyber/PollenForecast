# HarmonyOS 应用开发 - 全局索引

> **用途**: 跨项目共享文档中心  
> **最后更新**: 2026-01-14

---

## 📁 目录说明

| 文件/文件夹 | 用途 |
|-------------|------|
| `知识库.md` | 已验证的解决方案（主索引） |
| `知识库/` | 分类知识库（8个分类文件） |
| `知识库_中转站.md` | 待验证方案暂存 |
| `当前问题.md` | 与专家实时沟通 |
| `任务_*.md` | 任务模板（构建修复、知识库整理、问专家） |
| `backup/` | 项目代码备份 |

---

## 📚 知识库使用规则

### 写入规则
- ✅ **已验证方案**：写入 `知识库.md` 或对应分类文件
- 🔄 **待验证方案**：写入 `知识库_中转站.md`
- 📝 **只追加，不删除**（除非明确过时）

### 查阅优先级
1. 项目级 `.claude/CLAUDE.md`（项目特定）
2. 全局 `知识库.md`（通用方案）
3. 分类文件（深入细节）

---

## 🔧 AI 协作规范

### 📊 文档健康度检测

**规则**：读取指导文档时，如果发现文档行数过多，询问用户是否需要整理。

**阈值参考**：
- `知识库.md` > 500行 → 建议整理（主索引应保持精简）
- `知识库_中转站.md` > 300行 → 建议整理（待验证方案应及时迁移）
- `当前问题.md` > 100行 → 建议整理（问题解决后应清空）
- `CLAUDE.md` > 600行 → 建议整理（项目指导文档，可适当放宽）
- `问题记录.md` > 200行 → 建议整理（已解决问题应迁移）

**询问方式**："检测到 [文件名] 已达到 [行数] 行，建议整理。是否现在整理？"

### 🚨 文档整理硬规则（必须遵守）

**⚠️ 核心原则**：**先转移，确认成功后再删除**

**整理流程**：
1. **第一步：转移内容**
   - 详细开发历史 → 转移到 `开发日志.md`
   - 通用技术方案 → 转移到 `知识库/分类文件.md`
   - 已解决问题 → 转移到 `问题记录.md` 或知识库
   - 验证方案 → 转移到 `知识库/分类文件.md`

2. **第二步：确认转移成功**
   - 检查目标文件是否存在且内容完整
   - 验证转移的内容行数是否匹配
   - 确认链接和引用正确

3. **第三步：删除原内容**
   - **只有确认转移成功后，才能删除原文件中的对应内容**
   - 删除时保留指向新文件的链接
   - 记录删除日期和原因

**❌ 禁止操作**：
- ❌ 禁止未转移就删除
- ❌ 禁止转移未确认就删除
- ❌ 禁止一次性删除大量内容而不验证

**✅ 正确做法**：
- ✅ 先创建/更新目标文件
- ✅ 验证内容已完整转移
- ✅ 再删除原文件中的对应内容
- ✅ 保留链接和索引

### 3-Strike 规则
AI 尝试同一问题 3 次仍失败后：
1. 停止尝试
2. 整理问题到 `当前问题.md`
3. 告知用户粘贴给 CodeGenie 顾问

### 知识库更新规则
仅在用户确认"构建成功/运行正常/登记吧"后，才能更新知识库

---

## 📂 项目列表

| 项目 | 状态 | 说明 |
|------|------|------|
| PollenForecast | 🚀 活跃 | 花粉浓度播报 |
| EXIFPhotoParamTool | 🚀 活跃 | EXIF光影备忘录 |
| CuteCalculator | ✅ 完成 | 萌系计算器 |
| 其他项目 | 📋 规划中 | - |

---

## ⚠️ 重要提醒

1. **每个项目有独立的 `.claude/CLAUDE.md`**
2. **全局知识库是跨项目共享的**
3. **备份目录 `backup/` 内的 CLAUDE.md 会被 Cursor 自动加载**（见下方解决方案）

---

## 🔗 相关链接

- [HarmonyOS 官方文档](https://developer.huawei.com/consumer/cn/doc/harmonyos-guides-V5/)
- [DevEco Studio 下载](https://developer.huawei.com/consumer/cn/deveco-studio/)

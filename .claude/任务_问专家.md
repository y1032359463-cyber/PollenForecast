# 🤖 问专家任务

> **使用方法**: `@任务_问专家.md` + 描述问题

---

## 🚨 核心规则（必须遵守！）

> **教训来源**: 2025-12-27 分享功能失效问题，因只问现象不说前因，咨询多次专家都没得到正确答案

### ❌ 禁止只问现象

| 错误问法 | 正确问法 |
|---------|---------|
| "Sheet 打不开怎么办" | "我添加了 XX 代码后，Sheet 就打不开了" |
| "这个报错怎么消除" | "我做了 XX 改动，出现了这个报错" |
| "分享功能失效" | "分享本来能用，我加了批量导出功能后就失效了" |

### ✅ 必须包含的三要素

1. **改动前状态**：改动前功能是否正常？
2. **我做了什么**：具体改了哪些代码？
3. **改动后状态**：改动后出现什么问题？

### 📝 问问题前的自检清单

- [ ] ✅ 我说清楚了"改动前是什么状态"吗？（功能正常/异常）
- [ ] ✅ 我说清楚了"我做了什么改动"吗？（具体代码 + 改动原因）
- [ ] ✅ 我说清楚了"改动后出现什么问题"吗？（具体现象）
- [ ] ✅ 我把相关代码**完整**给专家看了吗？（包含上下文，不只是报错行）
- [ ] ✅ 我说明了使用的**组件/API**吗？（如：bindSheet、@Builder等）
- [ ] ✅ 我问的是"我的实现方式对吗"还是只问"怎么消除报错"？
- [ ] ✅ 我的问题描述控制在**1000字以内**吗？

---

# 执行步骤

### 1️⃣ 整理问题（1000字以内）

**核心原则**：让专家看到完整的"前-中-后"链条

#### 必须包含的7要素

1. **环境说明**：开发环境、API版本、设备信息
2. **改动前状态**：改动前功能是否正常？原有实现是什么？
3. **我做了什么**：具体改了哪些代码？为什么要改？
4. **改动后状态**：出现了什么问题或异常行为？
5. **错误信息**：完整的错误日志或异常堆栈（如果有）
6. **关键代码**：相关代码片段（精简但完整，包含上下文）
7. **核心疑问**：我的实现方式对吗？正确的方式是什么？

**环境说明模板**：
```markdown
## 🔴 环境说明（重要！）

| 项目 | 版本 |
|------|------|
| **开发工具** | DevEco Studio 6.0.0 |
| **目标平台** | HarmonyOS NEXT |
| **API 版本** | **API 20**（最新版） |
| **语言** | ArkTS（不是 Java/Kotlin） |
| **设备** | [如：Mate 60 Pro / 模拟器] |
```

### 2️⃣ 问题格式（完整版，含7要素）

```markdown
## 问题：[简短标题，如：bindSheet在添加XX功能后无法打开]

### 1. 环境说明
DevEco Studio 6.0.0 / HarmonyOS NEXT / API 20 / ArkTS  
设备：[Mate 60 Pro / 模拟器]

### 2. 🔴 改动前状态（必填）
**功能是否正常**：[是/否]  
**原有实现**：  
- [描述改动前的代码逻辑]
- [如果功能正常，说明它是怎么工作的]

**示例**：
> 改动前分享功能正常，点击分享按钮能弹出系统分享面板，代码使用的是 `sharing.shareContent()`。

### 3. 🔴 我做了什么改动（必填）
**改动文件**：[文件路径]  
**改动内容**：  
```typescript
// 改动前
[原代码]

// 改动后
[新代码]
```

**改动原因**：[为什么要做这个改动？要实现什么功能？]

**示例**：
> 为了实现批量导出功能，我在 `ExportService.ets` 中添加了 `batchExport()` 方法，同时修改了 `ShareView.ets` 中的 `onShareClick()` 方法，增加了导出逻辑判断。

### 4. 🔴 改动后出现的问题（必填）
**现象描述**：  
- [具体发生了什么？]
- [哪些功能受影响？]
- [是必现还是偶现？]

**示例**：
> 改动后点击分享按钮没有任何反应，控制台也没有报错。原本能正常弹出的分享面板完全不出现了。

### 5. 错误信息/日志（如果有）
```
[完整的错误堆栈，不超过20行]
[或关键的日志输出]
```

**如果没有报错**：说明"控制台无报错，但功能失效"

### 6. 关键代码（完整展示实现逻辑）

**相关组件/API**：[如：bindSheet、PanGesture、animateTo等]

```typescript
// 文件：XXX.ets
// 完整展示关键逻辑，包含上下文

@State showSheet: boolean = false

build() {
  Column() {
    Button('打开Sheet')
      .onClick(() => {
        this.showSheet = true  // 我的实现
      })
  }
  .bindSheet(this.showSheet, this.SheetBuilder(), {
    height: 300
  })
}

@Builder
SheetBuilder() {
  Text('Sheet内容')
}
```

### 7. 核心疑问（问实现方式，不只问报错）
1. ❓ 我的实现方式是否正确？
2. ❓ 如果不正确，正确的实现方式是什么？
3. ❓ [具体的技术疑问，如：bindSheet的状态管理应该怎么做？]

**避免只问**："这个报错怎么消除？"、"为什么打不开？"
```

### 3️⃣ 写入当前问题.md

整理好的问题写入 `@当前问题.md`，状态设为 `🔴 待专家回复`

---

## ⚡ 快捷用法

```
@EXIFPhotoParamTool/figma/日志.md 有报错，执行 @任务_问专家.md
```

```
bindSheet打不开，执行 @任务_问专家.md
```

---

## 📋 字数控制

| 部分 | 限制 | 要点 |
|------|------|------|
| 环境说明 | ~100字 | 表格形式，清晰明了 |
| 改动前状态 | ~150字 | 说明原功能是否正常 |
| 我做了什么 | ~200字 | 代码对比 + 改动原因 |
| 改动后问题 | ~100字 | 具体现象描述 |
| 错误日志 | ~150字 | 关键部分，删除重复 |
| 关键代码 | ~250字 | 精简但完整，含上下文 |
| 核心疑问 | ~50字 | 问实现方式，不只问报错 |
| **总计** | **≤1000字** | **越精简越好** |

